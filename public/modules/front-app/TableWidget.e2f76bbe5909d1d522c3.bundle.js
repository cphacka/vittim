(self.webpackChunk=self.webpackChunk||[]).push([[2171],{66809:function(e,t,n){"use strict";var r=n(22122),a=n(92137),l=n(96156),o=n(6610),i=n(5991),c=n(63349),s=n(10379),u=n(46070),p=n(77608),d=n(87757),m=n.n(d),g=n(67294),f=n(38773);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){(0,s.Z)(E,e);var t,n,l,d,b=(l=E,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,p.Z)(l);if(d){var n=(0,p.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function E(e){var t;return(0,o.Z)(this,E),(t=b.call(this,e)).resource=new f.Z({route:t.props.route}),t.state={value:t.props.value||"",disabled:!t.props.value},t.changeValue=t.changeValue.bind((0,c.Z)(t)),t.onChange=t.onChange.bind((0,c.Z)(t)),t.onKeyDown=t.onKeyDown.bind((0,c.Z)(t)),t}return(0,i.Z)(E,[{key:"componentDidUpdate",value:function(e,t){var n=this;e.route!==this.props.route&&(this.resource=new f.Z({route:this.props.route}),console.log(this.resource)),e.value!==this.props.value&&this.props.value!==this.state.value&&this.setState((function(e){return h(h({},e),{},{value:n.props.value})}))}},{key:"componentDidMount",value:(n=(0,a.Z)(m().mark((function e(){var t,n=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.props.value&&this.props.resourceid){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.resource.get(this.props.resourceid);case 4:t=e.sent,this.setState((function(e){return h(h({},e),{},{value:t[n.props.resourceid]||"",disabled:!1})}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.changeValue(e)}},{key:"onChange",value:function(e){var t=e.target.value;this.setState((function(e){return h(h({},e),{},{value:t})})),_.isFunction(this.props.changevalue)&&this.props.changevalue(t)}},{key:"changeValue",value:(t=(0,a.Z)(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,this.setState((function(e){return h(h({},e),{},{disabled:!0})})),_.isFunction(this.props.onBlur)&&this.props.onBlur(n),e.next=5,this.resource.put(this.props.resourceid,{value:n,column_value:n});case 5:e.sent,this.setState((function(e){return h(h({},e),{},{disabled:!1})}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.className;this.state.disabled&&(e+=" pointer-event-none");var t=h({},this.props);return delete t.changevalue,g.createElement("input",(0,r.Z)({},t,{className:e,onBlur:this.changeValue,onKeyDown:this.onKeyDown,onChange:this.onChange,value:this.state.value}))}}]),E}(g.Component);t.Z=E},1987:function(e,t,n){"use strict";n.d(t,{hX:function(){return a}}),n(87757);var r=n(37895);function a(){return window.iconsManager||(window.iconsManager=new r.default),window.iconsManager}n(38773),n(96486)},38844:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{i_:function(){return renderAdditionalRows},IN:function(){return renderCellActions}});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(85061),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22122),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(96156),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(28481),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67294),react_table__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(79521),react_table__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_table__WEBPACK_IMPORTED_MODULE_2__),_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(76593),_admin_src_js_helpers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1987),_admin_src_components_AutoUpdateInput__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(66809),_altrp_query_component_altrp_query_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(74374);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}__webpack_require__.e(350).then(__webpack_require__.bind(__webpack_require__,90350));var Link=window.Link,AltrpTable=function(e){var t=e.settings,n=e.query,r=e.data,a=(e.currentModel,e._status),l=e._error,o=e.setSortSettings,i=e.setFilterSettings,c=e.filterSetting,s=e.setPage,u=e._latestData,p=e.page,d=e.sortSetting;if(!t.tables_columns||!t.tables_columns.length)return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{children:"Please Add Column"});var m={};t.tables_columns.forEach((function(e){e.column_is_default_sorted&&!m.order_by&&(m.order_by=e.accessor,m.order=_.get(e,"column_is_default_sorted_direction","ASC"))}));var g=react__WEBPACK_IMPORTED_MODULE_1__.useMemo((function(){return _.get(t,"group_by_column_name")?_.get(t,"group_by_column_name"):getGroupBy(t.tables_columns)}),[t]);react__WEBPACK_IMPORTED_MODULE_1__.useEffect((function(){g&&o({order:"ASC",order_by:g})}),[g]);var f,b=n.getCounterStart(p),h=react__WEBPACK_IMPORTED_MODULE_1__.useMemo((function(){return t.group_collapsing})),E=react__WEBPACK_IMPORTED_MODULE_1__.useState([]),v=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.Z)(E,2),y=v[0],O=v[1],P=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),w=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.Z)(P,2),M=w[0],D=w[1],R=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),C=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.Z)(R,2),x=C[0],T=C[1],I=[];f=settingsToColumns(t),r=r.map((function(e){return e.id===M.rowId?(e[M.column]=M.value,_objectSpread({},e)):e}));var k=(0,react_table__WEBPACK_IMPORTED_MODULE_2__.useTable)({columns:react__WEBPACK_IMPORTED_MODULE_1__.useMemo((function(){return f||[]}),[t.tables_columns]),data:react__WEBPACK_IMPORTED_MODULE_1__.useMemo((function(){return r||[]}),[r])}),S=k.getTableProps,A=k.getTableBodyProps,j=k.headerGroups,L=k.rows,B=k.prepareRow,N=function(e){o({order_by:e,order:d&&d.order_by===e?"DESC"===d.order?"ASC":"DESC":"ASC"})},U=function(e,t){s(1);var n=_objectSpread({},c);t?n[e]=t:delete n[e],i(n)};return react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("table",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({className:"altrp-table altrp-table_columns-"+f.length},S()),react__WEBPACK_IMPORTED_MODULE_1__.createElement("thead",{className:"altrp-table-head"},renderAdditionalRows(t),j.map((function(e){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},e.getHeaderGroupProps(),{className:"altrp-table-tr"}),e.headers.map((function(e){return renderTh({column:e,sortSetting:d,sortingHandler:N,filterSetting:c,filterHandler:U})})))}))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("tbody",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},A(),{className:"altrp-table-tbody ".concat(t.table_style_table_striple_style?" altrp-table-tbody--striped":"")}),"error"===a?react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",null,l.message)):"loading"===a?react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",null,"Loading")):L.map((function(e,n){B(e);var r=_.get(t,"field_name_for_row_styling");return r=_.get(e.original,r,""),r=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.mbParseJSON)(r,{}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,{key:e.id},renderGroupingTr(e,g,I,t,h,O,y),react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},e.getRowProps(),{style:r,className:"altrp-table-tr ".concat(t.table_hover_row?"altrp-table-background":""," ").concat(h&&-1!==y.indexOf(_.last(I))?"altrp-d-none":"")}),e.cells.map((function(n,r){var a=n.render("Cell"),l=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.isEditor)()?"a":Link;f[r].column_external_link&&!(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.isEditor)()&&(l="a");var o=n.column.column_body_alignment?{textAlign:n.column.column_body_alignment}:{},i=_objectSpread({},n.getCellProps()),c=n.value,s="";if(f[r].column_is_editable&&f[r].column_edit_url){var u=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(f[r].column_edit_url,e.original);s=react__WEBPACK_IMPORTED_MODULE_1__.createElement(_admin_src_components_AutoUpdateInput__WEBPACK_IMPORTED_MODULE_5__.Z,{className:"altrp-inherit altrp-table-td__double-click-content",route:u,resourceid:"",changevalue:function(t){D({value:t,rowId:e.original.id,column:f[r]._accessor})},value:c}),i.onDoubleClick=function(){x.column===f[r]._accessor&&x.rowId===e.original.id?T({}):T({column:f[r]._accessor,rowId:e.original.id})}}var p="altrp-table-td ".concat(n.column.column_body_alignment?"altrp-table-td_alignment-".concat(n.column.column_body_alignment):""," ");x.column===f[r]._accessor&&e.original.id===x.rowId&&(p+=" altrp-table-td_double-clicked"),t.table_hover_row||(p+=" altrp-table-background"),_.isObject(n.value)&&(a=""),a=f[r].column_link?react__WEBPACK_IMPORTED_MODULE_1__.createElement(l,{to:(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(f[r].column_link,e.original),href:(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(f[r].column_link,e.original),target:f[r].column_blank_link?"_blank":"",className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:n.value}}):react__WEBPACK_IMPORTED_MODULE_1__.createElement("span",{className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:n.value}}),n.column._accessor&&"##"===n.column._accessor.trim()&&(a=b+++"");var d=_.get(n,"column.column_styles_field");return d=_.get(e.original,d,""),d=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.mbParseJSON)(d,{}),o=_.assign(o,d),_.get(n,"column.actions.length")?react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},i,{className:p,style:o}),renderCellActions(n,e)):_.isString(a)&&!s?react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},i,{className:p,dangerouslySetInnerHTML:{__html:a+""},style:o})):react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},i,{className:p,style:o}),a,s)}))))}))),renderFooter(t,r)),"prev-next"===n.paginationType&&n.pageSize?react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"altrp-pagination"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("button",{className:"altrp-pagination__previous",onClick:function(){s((function(e){return Math.max(e-1,0)})),T({}),D({})},disabled:1===p},t.prev_text||""),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"altrp-pagination__count"},t.current_page_text||"Current Page:",p),react__WEBPACK_IMPORTED_MODULE_1__.createElement("button",{className:"altrp-pagination__next",onClick:function(){D({}),T({}),s((function(e){return u&&u.hasMore?e+1:e}))},disabled:!u||!u.hasMore},t.next_text||"")):"")};function settingsToColumns(e){var t=[],n=e.tables_columns;return(n=n||[]).forEach((function(e){e.column_name&&(e.actions&&e.actions.length||e.accessor)&&(e._accessor=e.accessor,t.push(e))})),t}function renderAdditionalRows(e){var t=e.additional_rows;return _.isArray(t)?t.map((function(e){return e.additional_cells=e.additional_cells||[],react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",{key:"additional-row-".concat(e.id)},e.additional_cells.map((function(t){return t.rowspan=t.rowspan||1,t.colspan=t.colspan||1,react__WEBPACK_IMPORTED_MODULE_1__.createElement("th",{key:"additional-cell-".concat(e.id,"-").concat(t.id),role:"columnheader",className:"altrp-table-th altrp-table-cell",colSpan:(null==t?void 0:t.colspan)||1,rowSpan:(null==t?void 0:t.rowspan)||1},t.title)})))})):""}function renderTh(e){var t=e.column,n=e.sortSetting,r=e.sortingHandler,a=e.filterSetting,l=e.filterHandler,o=t.column_width,i=t.column_header_alignment,c=_objectSpread({},t.getHeaderProps()),s={};o&&(s.width=o),i&&(s.textAlign=i),c.className="altrp-table-th",t.column_is_sorted&&(c.onClick=function(){return r(t._accessor)},c.className+=" clickable"),t.column_width&&(c.width=t.column_width+"%");var _=t.render("column_name");return react__WEBPACK_IMPORTED_MODULE_1__.createElement("th",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},c,{style:s}),_,n&&t.column_is_sorted&&n.order_by===t._accessor&&("DESC"===n.order?(0,_admin_src_js_helpers__WEBPACK_IMPORTED_MODULE_4__.hX)().renderIcon("chevron",{className:"rotate-180 sort-icon "}):(0,_admin_src_js_helpers__WEBPACK_IMPORTED_MODULE_4__.hX)().renderIcon("chevron",{className:"sort-icon"})),t.column_is_filtered&&react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",{className:"altrp-label"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"text",onClick:function(e){e.stopPropagation()},onChange:function(e){e.stopPropagation();var n=e.target.value;l(t._accessor,n)},value:a[t._accessor]||"",className:"altrp-field"})))}function getGroupBy(e){var t=null;return e.forEach((function(e){e.group_by&&(t=e.accessor)})),t}function renderGroupingTr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;if(!t)return null;var i=_.get(e,"original."+t,"");if(i||(i=_.get(r,"group_default_text","")),n.indexOf(i)>=0)return null;n.push(i);var c=-1!==o.indexOf(i),s=r.collapsed_icon,u=r.expanded_icon;return _.isArray(s)&&(s=null),_.isArray(u)&&(u=null),i?react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",{className:"altrp-table-tr"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",{colSpan:_.get(e,"cells.length",1),onClick:function(){a&&toggleGroup(i,l,o)},className:"altrp-table-td__grouping altrp-table-td altrp-table-background ".concat(a?c?"altrp-pointer":"altrp-pointer active":""," ")},a?react__WEBPACK_IMPORTED_MODULE_1__.createElement("span",{className:"altrp-table__collapse-icon ".concat(c?"altrp-table__collapse-icon_collapsed":"")},c?(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.renderAsset)(s||{assetType:"icon",name:"add"}):(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.renderAsset)(u||{assetType:"icon",name:"minus"})):null,i)):null}function toggleGroup(e,t,n){-1===n.indexOf(e)?(n.push(e),t((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__.Z)(n))):t(n=_.filter(n,(function(t){return t!==e})))}function renderFooter(settings,data){var footerColumns=settings.footer_columns||[];return 0===footerColumns.length?null:react__WEBPACK_IMPORTED_MODULE_1__.createElement("tfoot",{className:"altrp-table-foot"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",{className:"altrp-table-tr"},footerColumns.map((function(footerColumn){var style={textAlign:footerColumn.column_footer_alignment||"left"},content=footerColumn.content;if(-1!==content.indexOf("{{altrphelpers.")){window.altrphelpers.context=data,content=content.replace(/{{/g,"").replace(/}}/g,"");try{content=eval(content)}catch(e){console.log(content),console.error(e),content=""}}else content=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.replaceContentWithData)(content);return react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",{className:"altrp-table-td",key:footerColumn.id,style:style,colSpan:footerColumn.colspan||1},content)}))))}function renderCellActions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=_.get(e,"column.actions",[]);return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"altrp-actions"},n.map((function(e){var n=e.type||"Link",r=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.replaceContentWithData)(e.text||""),a=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(e.link,t.original),l={className:"altrp-actions-item altrp-link "+(e.classes||""),style:{},key:(e.id||"")+(t.id||""),title:e.text||""};if(l.style.marginLeft=_.get(e,"spacing.left")?_.get(e,"spacing.left")+_.get(e,"spacing.unit"):null,l.style.marginRight=_.get(e,"spacing.right")?_.get(e,"spacing.right")+_.get(e,"spacing.unit"):null,l.style.marginTop=_.get(e,"spacing.top")?_.get(e,"spacing.top")+_.get(e,"spacing.unit"):null,l.style.marginBottom=_.get(e,"spacing.bottom")?_.get(e,"spacing.bottom")+_.get(e,"spacing.unit"):null,"Link"===n&&(n=Link,l.to=a),"a"===n&&e.target_blank&&(l.target="_blank"),"a"===n&&(l.href=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(e.link,t.original)),_.get(e,"icon.assetType")){var o=_.get(e,"size.size")?_.get(e,"size.size")+_.get(e,"size.unit","px"):null,i={className:"altrp-actions-item__icon",style:{}};o&&(i.style.width=o,i.style.height=o),r=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.renderAsset)(e.icon,i)}return react__WEBPACK_IMPORTED_MODULE_1__.createElement(n,l,r)})))}__webpack_exports__.ZP=function(e){return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_altrp_query_component_altrp_query_component__WEBPACK_IMPORTED_MODULE_6__.Z,e,react__WEBPACK_IMPORTED_MODULE_1__.createElement(AltrpTable,null))}},73870:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Le}});var r=n(22122),a=n(81253),l=n(96156),o=n(6610),i=n(5991),c=n(63349),s=n(10379),u=n(46070),p=n(77608),d=n(71614),m=n(31298),g=n(38844),f=n(85061),b=n(92137),h=n(28481),E=n(87757),v=n.n(E),y=n(67294),O=window.altrpLibs.Blueprint.RangeSlider;function P(e){var t=e.column,n=t.filterValue,r=void 0===n?[]:n,a=t.preFilteredRows,l=t.setFilter,o=t.label_step_size,i=t.step_size,c=t.id,s=y.useMemo((function(){var e=a.length?a[0].values[c]:0;"##"===c&&a.length&&(e=a[0].index);var t=e,n=e;return a.forEach((function(e){var r=e.values[c];"##"===c&&(r=e.index),t=Math.min(r,t),n=Math.max(r,n)})),[t||0,n||0]}),[c,a]),u=(0,h.Z)(s,2),p=u[0],d=u[1],m=y.useMemo((function(){var e=r;return _.isEmpty(e)&&(e=[Number(p),Number(d)]),void 0===e[0]&&(e[0]=Number(p)),void 0===e[1]&&(e[1]=Number(d)),e}),[r,a,c]),g=y.useMemo((function(){return Number(null==i?void 0:i.size)?Number(null==i?void 0:i.size):1}),[null==i?void 0:i.size]),f=y.useMemo((function(){return Number(null==o?void 0:o.size)?Number(null==o?void 0:o.size):20}),[null==o?void 0:o.size]);return y.createElement("div",{className:"altrp-filter-group altrp-filter-group_range-slider",style:{display:"flex"}},y.createElement(O,{min:p,max:d,stepSize:g,labelStepSize:f,onChange:function(e){l(e)},value:m}))}var w,M=n(7145),D=n.n(M),R=n(76593),C=n(79521),x=n(74374),T=n(4916),I=n(1987),k=n(90233),S=n(81352),A=n(85009),j=n(71743),L=n(89878),B=n(66809),N=n(32465),U=n(71893);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W,K,z=window.altrpHelpers.getResponsiveSetting,F=U.ZP.div(w||(w=(0,N.Z)(["",""])),(function(e){var t=e.settings,n=e.rows;if(!z(t,"table_transpose"))return"";var r=z(t,"table_style_main_width"),a=z(t,"table_style_other_width");if("%"!==_.get(r,"unit")&&"%"!==_.get(a,"unit"))return"";var l="";l+="grid-template-columns:".concat(_.get(r,"size")).concat(_.get(r,"unit")||"px");var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw l}}}}(n);try{for(i.s();!(o=i.n()).done;)o.value,l+=" ".concat(_.get(a,"size")).concat(_.get(a,"unit")||"px")}catch(e){i.e(e)}finally{i.f()}return l+";&&&{width:100%;}"})),q=n(32360),H=U.ZP.div(W||(W=(0,N.Z)(["",""])),(function(e){var t=e.settings,n=e.column;if(!t.table_transpose)return"& .altrp-filter-group_range-slider{\n    padding-left: 20px;\n    padding-right: 20px;\n  }";var r=n.column_cell_vertical_alignment,a=n.header_full_width,l=n.header_bg,o=(0,R.getResponsiveSetting)(t,"table_style_main_width"),i=(0,R.getResponsiveSetting)(t,"table_style_other_width"),c="&.altrp-table-th.altrp-table-cell{",s=(0,R.getResponsiveSetting)(t,"cell_vertical_alignment");return s=(0,q.verticalAlignToAlignItems)(s),r&&(s=(0,q.verticalAlignToAlignItems)(r)),s&&(c+="\n    display: flex;\n    align-items: ".concat(s,";\n    > span{\n      display: block;\n      width: 100%;\n    }\n    ")),l&&(c+="background-color:".concat(l.color,";")),a&&(c+="\n      grid-column-start: 1;\n      grid-column-end: ".concat(n.filteredRows.length+2,";\n      width: calc(").concat(_.get(o,"size")+(_.get(o,"unit")||"px")," + (").concat(_.get(i,"size")+(_.get(i,"unit")||"px"),") * ").concat(n.filteredRows.length,")\n    ")),"%"!==_.get(o,"unit")&&(c+="\n      width: ".concat(_.get(o,"size")+(_.get(o,"unit")||"px"),"\n    ")),c+"}"})),G=n(74061),V=n(59240),X=n(5200),J=U.ZP.div(K||(K=(0,N.Z)(["",""])),(function(e){var t=e.settings,n=e.column;if(!t.table_transpose)return"";var r=n.column_cell_vertical_alignment,a=n.body_bg,l=n.header_full_width,o=(0,R.getResponsiveSetting)(t,"table_style_other_width"),i=(0,R.getResponsiveSetting)(t,"cell_vertical_alignment");i=(0,q.verticalAlignToAlignItems)(i),r&&(i=(0,q.verticalAlignToAlignItems)(r));var c="&.altrp-table-td.altrp-table-cell{";return i&&(c+="\n    display: flex;\n    align-items: ".concat(i,";\n    .altrp-table-td__default-content{\n      display: block;\n      width: 100%;\n    }\n    ")),l?"&.altrp-table-td{display:none;}":(a&&(c+="background-color:".concat(a.color,";")),"%"!==_.get(o,"unit")&&(c+="\n    width: ".concat(_.get(o,"size")+(_.get(o,"unit")||"px"),";\n  ")),c+="}")}));function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Q=function(e){var t=e.cell,n=e.settings,a=t.row,o=t.column,i=n.resize_columns,c=n.replace_rows,s=n.virtualized_rows,u=n.hide_expanded_row_icon,p=n.expanded_row_icon,d=n.hide_not_expanded_row_icon,m=n.not_expanded_row_icon,g=t.render("Cell");"##"===t.column.id&&(g=t.row.index+1),t.isGrouped?g=React.createElement(React.Fragment,null,React.createElement("span",a.getToggleRowExpandedProps(),a.isExpanded?(0,R.renderIcon)(u,p,"👇","expanded-row"):(0,R.renderIcon)(d,m,"👉","not-expanded-row"))," ",t.render("Cell")," (",(0,R.recurseCount)(a,"subRows"),")"):t.isAggregated?g=t.render("Aggregated"):t.isPlaceholder&&(g=t.render("Cell"));var f=["altrp-table-td","altrp-table-cell"];t.isAggregated&&f.push("altrp-table-td_aggregated"),t.isPlaceholder&&f.push("altrp-table-td_placeholder"),t.isGrouped&&f.push("altrp-table-td_grouped");var b=React.useMemo((function(){var e=t.getCellProps();if(i||s||delete e.style,_.get(t,"column.column_styles_field")){var n=_.get(t,"column.column_styles_field");n=_.get(a.original,n,""),n=(0,R.mbParseJSON)(n,{}),e.style=_.assign(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n),e.style)}return e}),[i,c,s,t.getCellProps().style.width,_.get(t,"column.column_styles_field")]);n.table_hover_row||f.join("altrp-table-background");var h={};return t.column.column_body_alignment&&(h.textAlign=t.column.column_body_alignment),t.column.body_bg&&(h.backgroundColor=t.column.body_bg.color),h=_.assign(h,b.style||{}),t.column.column_cell_vertical_alignment&&"inherit"!==t.column.column_cell_vertical_alignment&&(h.verticalAlign=t.column.column_cell_vertical_alignment),React.createElement(J,(0,r.Z)({},b,{settings:n,column:o,style:h,className:f.join(" ")}),g)};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te,ne=function(e){var t=e.row,n=e.index,a=e.moveRow,l=e.style,o=e.visibleColumns,i=e.cardTemplate,c=e.settings,s=React.useRef(null),_=React.useRef(null),u=ee({},t.getRowProps());delete u.role,delete u.style;var p=null,d=c.resize_columns,m=c.replace_rows,g=c.row_expand,f=c.virtualized_rows,b=c.card_template,E=c.replace_text,v=c.replace_image,y=c.replace_width;if(i){var O=A.default.cloneElement(i);O.setCardModel(new j.Z(t.original||{})),p=React.createElement(O.componentClass,{element:O,ElementWrapper:L.default,children:O.children})}var P=React.useMemo((function(){var e=t.getRowProps();return d||f||(delete e.style,l={}),m&&(e.ref=s),e}),[d,m,f]),w=(0,V.L)({accept:"row",hover:function(e,t){if(s.current){var r=e.index,l=n;if(r!==l){var o=s.current.getBoundingClientRect(),i=(o.bottom-o.top)/2,c=t.getClientOffset().y-o.top;r<l&&c<i||r>l&&c>i||(a(r,l),e.index=l)}}}}),M=(0,h.Z)(w,2)[1],D=(0,X.c)({item:{index:n},type:"row",collect:function(e){return{isDragging:e.isDragging()}}}),R=(0,h.Z)(D,3),C=R[0].isDragging,x=R[1],T=C?0:1;(0,R[2])(M(s)),x(_);var I=React.useMemo((function(){return d||f?l:{}}),[d,f,t.getRowProps().style.width]);return React.createElement(React.Fragment,u,React.createElement("div",(0,r.Z)({},P,{className:"altrp-table-tr ".concat(C?"altrp-table-tr__dragging":""),style:ee(ee({},I),{},{opacity:T})}),m&&React.createElement("div",{className:"altrp-table-td replace-text",ref:_,style:{width:y}},E,v&&v.url&&React.createElement("img",{src:v.url,className:"replace-picture"})),t.cells.map((function(e,t){return React.createElement(Q,{cell:e,key:t,settings:c})}))),t.isExpanded&&g&&b&&i&&React.createElement("div",{className:"altrp-table-tr altrp-posts"},React.createElement("td",{colSpan:o.length+m||1,className:"altrp-table-td altrp-post"},p)))},re=U.ZP.div(te||(te=(0,N.Z)(["\n",""])),(function(e){var t,n=e.settings,r=e.groupIndex,a=(0,R.getResponsiveSetting)(n,"tables_groups"),l=(0,R.getResponsiveSetting)(n,"tables_settings_for_subheading"),o=_.get(l,r-1,{}).transition;if(!_.isArray(a)||!r)return"";if(!(t=r>a.length?a[a.length-1]:a[r-1]))return"";if(!_.isObject(t))return"";var i=t,c=i.cell_alignment,s=i.padding,u=i.color,p=i.bg_color,d=i.typographic,m="&.altrp-table-tr .altrp-table-td{";null!=o&&o.size&&(m+="transition-duration: ".concat(o.size,"s;")),_.isObject(s)&&(m+=(0,q.dimensionsControllerToStyles)(s)),_.isObject(d)&&(m+=(0,q.typographicControllerToStyles)(d)),c&&(m+="text-align: ".concat(c,";")),null!=u&&u.color&&(m+="color: ".concat(u.color,";")),null!=p&&p.color&&(m+="background-color: ".concat(p.color,";")),m+="}&.altrp-table-tr .altrp-table-td:hover{";var g=t["cell_alignment_:hover_"],f=t["padding_:hover_"],b=t["color_:hover_"],h=t["bg_color_:hover_"],E=t["typographic_:hover_"];return _.isObject(f)&&(m+=(0,q.dimensionsControllerToStyles)(f)),_.isObject(E)&&(m+=(0,q.typographicControllerToStyles)(E)),g&&(m+="text-align: ".concat(g,";")),null!=b&&b.color&&(m+="color: ".concat(b.color,";")),null!=h&&h.color&&(m+="background-color: ".concat(h.color,";")),m+"}"}));function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var le=function e(t){var n=t.prepareRow,a=t.rows,o=t.visibleColumns,i=t.totalColumnsWidth,c=t.moveRow,s=t.settings,u=t.cardTemplate,p=t.groupIndex,d=t.page,m=y.useMemo((function(){return(0,R.scrollbarWidth)()}),[]),g=s.virtualized_rows,f=s.virtualized_height,b=s.item_size,E=s.tables_settings_for_subheading,v=(s.table_style_table_striple_style,y.useCallback((function(e){var t=e.index,l=e.style,i=d?d[t]:a[t];return n(i),y.createElement(ne,(0,r.Z)({index:t,row:i,visibleColumns:o,moveRow:c,settings:s,cardTemplate:u},i.getRowProps({style:l})))}),[d,a,o,s,u,c,n])),O=y.useMemo((function(){return d?d.length:a.length}),[d,a]),P=y.useMemo((function(){var e;if(_.isEmpty(E))return null;var t,n,r=null===(e=E[p])||void 0===e?void 0:e.name;if(!r)return null;if(-1!==r.indexOf("?")&&-1!==r.indexOf(":")){var l=r.split("?")[1].split(":"),o=(0,h.Z)(l,2);t=o[0],n=o[1],t=t.trim(),n=n.trim(),cell.value=cell.value?t:n,r=r.split("?")[0].trim()}var i=[];return(d||a).forEach((function(e){var a,l=i.find((function(t){return t.columnValue===e.original[r]}));a=t||n?e.original[r]?t:n:e.original[r],l||(l={columnValue:a,rows:[]},i.push(l)),l.rows.push(e)})),i}),[E,d,a]);return _.isEmpty(P)?g?y.createElement(y.Fragment,null,y.createElement(G.t7,{height:Number(f)||0,itemCount:O,itemSize:Number(b)||0,width:i+m},v)):y.createElement(y.Fragment,null,(d||a).map((function(e,t){return n(e),y.createElement(ne,(0,r.Z)({index:t,row:e,visibleColumns:o,moveRow:c,settings:s,cardTemplate:u},e.getRowProps()))}))):P.map((function(n,r){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);return a.page=n.rows,a.rows=n.rows,a.groupIndex=p+1,a.key=n.columnValue+r,y.createElement(y.Fragment,{key:a.key},y.createElement(re,{className:"altrp-table-tr altrp-table-tr_group-subheading",groupIndex:a.groupIndex,settings:s},y.createElement("td",{colSpan:o.length||1,className:"altrp-table-td",dangerouslySetInnerHTML:{__html:0===n.columnValue?"0":n.columnValue||"&nbsp;"}})),y.createElement(e,a))}))};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ie=function(e){var t=e.settings,n=t.tables_settings_for_subheading,a=t.table_style_table_striple_style,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return o.rows=y.useMemo((function(){if(_.isEmpty(n))return e.rows;var t=[],r=[];n.forEach((function(e){e.name&&(t.push(e.name),r.push(e.order||"asc"))}))}),[n]),o.groupIndex=0,y.createElement("div",(0,r.Z)({},e.getTableBodyProps(),{className:"altrp-table-tbody ".concat(a?"altrp-table-tbody--striped":"")}),y.createElement(le,o))},ce=n(49825),se=["indeterminate","icons"];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.e(8102).then(n.bind(n,48102)),n.e(350).then(n.bind(n,90350));var pe=window.Link;function de(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return n.some((function(e){return!e&&!r||(_.isString(r)||(r+=""),r.includes(e))}))}))}))}function me(e,t,n){return t=t?t[0]:void 0,(0,k.L)(e,n,{keys:[function(e){var n=e.values[t];return"##"===t&&(n=e.index+1),n}]})}function ge(e,t,n){return t=t?t[0]:void 0,e.filter((function(e){return _.get(e,"values.".concat(t))===n}))}function fe(e,t,n){return t=t?t[0]:void 0,e.filter((function(e){return n=n.replace(/\s/g,""),-1!==_.get(e,"values.".concat(t),"").replace(/\s/g,"").indexOf(n)}))}function be(e){var t=e.settings,n=e.currentScreen,a=e.widgetId,o=(e.query,e.data),i=(e.currentModel,e._status),c=(e._error,e.setSortSettings,e.setFilterSettings,e.filterSetting,e._latestData,e.widgetState),s=(e.sortSetting,y.useRef(c)),u=t.inner_page_size,p=t.global_filter,d=t.card_template,m=t.row_expand,E=t.selected_storage,O=t.row_select,w=t.row_select_width,M=t.store_state,x=t.loading_text,T=t.row_select_all,k=t.hide_columns,A=t.resize_columns,j=t.table_transpose,L=t.virtualized_rows,B=t.replace_rows,N=t.tables_settings_for_subheading,U=t.replace_width,Z=t.ids_storage,W=t.hide_grouped_column_icon,K=t.grouped_column_icon,z=t.hide_not_grouped_column_icon,q=t.not_grouped_column_icon,G=t.checkbox_checked_icon,V=void 0===G?{}:G,X=t.checkbox_unchecked_icon,J=void 0===X?{}:X,$=t.checkbox_indeterminate_icon,Q=void 0===$?{}:$,Y=y.useState(null),ee=(0,h.Z)(Y,2),te=ee[0],ne=ee[1],re=y.useMemo((function(){var e;return u<(null===(e=o)||void 0===e?void 0:e.length)}),[o,u]),ae=y.useState(o),le=(0,h.Z)(ae,2),oe=le[0],se=le[1];y.useEffect((function(){se(o)}),[o]);var _e=y.useMemo((function(){return{fuzzyText:me,fullMatchText:ge,partialMatchText:fe,text:function(e,t,n){return t=t?t[0]:void 0,e.filter((function(e){var r=e.values[t];return"##"===t&&(r=e.index+1),void 0===r||String(r).toLowerCase().startsWith(String(n).toLowerCase())}))},between:function(e,t,n){var r=n||[],a=r[0],l=r[1];if((a="number"==typeof a?a:-1/0)>(l="number"==typeof l?l:1/0)){var o=a;a=l,l=o}return e.filter((function(e){return t.some((function(t){var n=e.values[t];return"##"===t&&(n=e.index+1),n>=a&&n<=l}))}))},equals:function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return"##"===t&&(r=e.index+1),r==n}))}))},includesSome:de}}),[]),pe=y.useMemo((function(){return{Filter:he,width:150,Cell:Me}}),[]);y.useEffect((function(){o?_.isArray(o)||(o=[o]):o=[]}),[o]);var be=y.useMemo((function(){return function(e,t){var n=[],a=e.tables_columns,l=e.card_template,o=e.row_expand,i=e.virtualized_rows,c=e.resize_columns,s=e.hide_expanded_row_icon,_=e.expanded_row_icon,u=e.hide_not_expanded_row_icon,p=e.edit_disabled,d=e.not_expanded_row_icon;a=a||[];var m=((0,R.getResponsiveSetting)(e,"columns_order")||"").trim();if(m=m?m.split(","):[],a.forEach((function(e){if(e.actions&&e.actions.length||e.accessor){if(e.edit_disabled=p,e._accessor=e.accessor,e.accessor&&-1!==e.accessor.indexOf("?")&&-1!==e.accessor.indexOf(":")&&(e.accessor=e.accessor.split("?")[0].trim()),e.column_name=e.column_name||"&nbsp;",e.column_is_filtered)switch(e.filter="fuzzyText",e.column_filter_type){case"min_max":e.filter="between",e.Filter=ye;break;case"range_slider":e.filter="between",e.Filter=P;break;case"slider":e.filter="equals",e.Filter=ve;break;case"select":e.filter="includesSome",e.Filter=function(e){var n=e.column;return y.createElement(Ee,{column:n,widgetId:t})};break;case"text":switch(e.column_text_filter_type){case"full_match":e.filter="fullMatchText";break;case"partial_match":e.filter="partialMatchText"}}if(e.canGroupBy=!!e.group_by,e.disableSortBy=!e.column_is_sorted,e.aggregate){var r=e.aggregate_template||"{{value}} Unique Names";e.Aggregated=function(e){var t=e.value;return r.replace(/{{value}}/g,t)}}(i||c)&&(e.width=Number(e.column_width)||150),n.push(e)}})),e.row_expand&&n.unshift({id:"expander",column_name:function(e){var t=e.getToggleAllRowsExpandedProps,n=e.isAllRowsExpanded;return y.createElement("span",(0,r.Z)({},t(),{className:"altrp-table__all-row-expander"}),n?(0,R.renderIcon)(s,_,"👇","expanded-row"):(0,R.renderIcon)(u,d,"👉","not-expanded-row"))},Cell:function(e){var t=e.row;return l&&o||t.canExpand?y.createElement("span",(0,r.Z)({className:"altrp-table__row-expander"},t.getToggleRowExpandedProps({style:{paddingLeft:"".concat(2*t.depth,"rem")}})),t.isExpanded?(0,R.renderIcon)(s,_,"👇","expanded-row"):(0,R.renderIcon)(u,d,"👉","not-expanded-row")):null}}),m.length){var g=[];m.forEach((function(e){e=parseInt(e)-1,n[e]&&-1===g.indexOf(n[e])&&g.push(n[e])})),n=g}return n}(t,a)}),[t,a]);y.useEffect((function(){d&&m&&(0,b.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.default.loadParsedTemplate(d);case 2:t=e.sent,ne(t);case 4:case"end":return e.stop()}}),e)})))()}),[m,d]);var we=[C.useFilters,C.useGlobalFilter,C.useGroupBy,C.useSortBy,C.useExpanded,C.usePagination,C.useRowSelect,C.useResizeColumns,C.useBlockLayout];O&&we.push((function(e){e.visibleColumns.push((function(e){return[{id:"selection",column_width:w||0,column_name:function(e){var n=e.getToggleAllRowsSelectedProps,a=e.getToggleAllPageRowsSelectedProps;return!t.inner_page_size||t.inner_page_size<0||T?y.createElement("div",{className:"altrp-toggle-row"},y.createElement(Oe,(0,r.Z)({},n(),{icons:{checkedIcon:V,uncheckedIcon:J,indeterminateIcon:Q}}))):y.createElement("div",{className:"altrp-toggle-row"},y.createElement(Oe,(0,r.Z)({},a(),{icons:{checkedIcon:V,uncheckedIcon:J,indeterminateIcon:Q}})))},Cell:function(e){var t=e.row;return y.createElement("div",{className:"altrp-toggle-row"},y.createElement(Oe,(0,r.Z)({},t.getToggleRowSelectedProps(),{icons:{checkedIcon:V,uncheckedIcon:J,indeterminateIcon:Q}})))}}].concat((0,f.Z)(e))}))}));var De=y.useState(!1),Re=(0,h.Z)(De,2),Ce=Re[0],xe=Re[1],Te=function(e,t,n){xe(!0),se((function(r){return r.map((function(a,o){return o===e?ue(ue({},r[e]),{},(0,l.Z)({},t,n)):a}))}))},Ie=y.useCallback((function(e){return e.id}),[]),ke=y.useMemo((function(){var e={columns:be,data:oe,filterTypes:_e,autoResetPage:!Ce,defaultColumn:pe,updateData:Te};if(B&&(e.getRowId=Ie),(0,R.isEditor)()&&(e.initialState=u>=1?{pageSize:Number(u)}:{pageSize:o.length}),_.isArray(e.data)||(_.isObject(e.data)?e.data=[e.data]:e.data=[]),!_.isEmpty(N)){var t=N.map((function(e){return{id:e.name,desc:"DESC"===e.order}}));_.set(e,"initialState.sortBy",t)}return e}),[u,o,be,s,oe,B,Ce,N]);y.useEffect((function(){_.isObject(s.current)&&(ke.initialState=s.current)}),[s,o]);var Se=C.useTable.apply(void 0,[ke].concat(we)),Ae=Se.getTableProps,je=Se.getTableBodyProps,Le=Se.headerGroups,Be=Se.prepareRow,Ne=Se.page,Ue=(Se.canPreviousPage,Se.canNextPage,Se.pageOptions,Se.pageCount),Ze=Se.gotoPage,We=Se.nextPage,Ke=Se.previousPage,ze=Se.getToggleHideAllColumnsProps,Fe=Se.allColumns,qe=Se.rows,He=Se.visibleColumns,Ge=Se.preGlobalFilteredRows,Ve=Se.setGlobalFilter,Xe=Se.setPageSize,Je=Se.selectedFlatRows,$e=Se.totalColumnsWidth,Qe=Se.state,Ye=Qe.pageIndex,et=Qe.globalFilter,tt=(Qe.groupBy,Qe.selectedRowIds,Qe.expanded,Qe.pageSize);function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[];return _.isEmpty(e)||e.forEach((function(e){e.original&&(t?n.push(_.get(e.original,t)):n.push(e.original)),e.subRows&&(n=_.concat(n,nt(e.subRows)))})),n}y.useEffect((function(){M&&(0,R.storeWidgetState)(a,Qe)})),y.useEffect((function(){Xe&&(Number(u)&&!Number(u<1)||Xe(o.length||10),Xe(Number(u)||o.length||10))}),[u,o]);var rt=y.useMemo((function(){return nt(Je)}),[Je]),at=y.useMemo((function(){return nt(Je,"id")}),[Je]);y.useEffect((function(){!E||_.isEqual(altrpHelpers.getDataByPath(E),rt)||(0,R.isEditor)()||(0,R.setDataByPath)(E,rt)}),[Je]),y.useEffect((function(){!Z||_.isEqual(altrpHelpers.getDataByPath(Z),at)||(0,R.isEditor)()||(0,R.setDataByPath)(Z,at)}),[Je]);var lt=y.useMemo((function(){var e=null;return u&&u>=1&&(e={settings:t,nextPage:We,previousPage:Ke,pageIndex:Ye,pageCount:Ue,pageSize:tt,setPageSize:Xe,widgetId:a,gotoPage:Ze}),e}),[u,tt,Ue,Ye,t]),ot=y.useRef(null);return y.createElement(y.Fragment,null,k&&y.createElement("div",{className:"altrp-table-hidden"},y.createElement("div",{className:"altrp-table-hidden__all"},y.createElement(Oe,ze())," Toggle All"),Fe.map((function(e){return["expander","selection"].indexOf(e.id)>=0?null:y.createElement("div",{key:e.id,className:"altrp-table-hidden__column"},y.createElement("label",null,y.createElement("input",(0,r.Z)({type:"checkbox"},e.getToggleHiddenProps()))," ",e.column_name||e.id,e.id))})),y.createElement("br",null)),y.createElement(F,(0,r.Z)({className:"altrp-table altrp-table_columns-"+be.length,ReactTable:Se,currentScreen:n,settings:t,table:ot,rows:qe,ref:ot},Ae()),y.createElement("div",{className:"altrp-table-head"},(0,g.i_)(t),Le.map((function(e){var n=e.getHeaderGroupProps();return A||L||delete n.style,y.createElement("div",(0,r.Z)({},n,{className:"altrp-table-tr"}),B&&y.createElement("div",{className:"altrp-table-th altrp-table-cell",style:{width:U}}),e.headers.map((function(e,n){var a=e.column_width,l=e.column_header_alignment,o=e.header_bg,i=e.getHeaderProps(e.getSortByToggleProps());i.settings=t;var c=ue(ue({},e.getResizerProps()),{},{onClick:function(e){e.stopPropagation()}});A||L||(i.style={},a&&(i.style.width=a+"%"),l&&(i.style.textAlign=l),o&&(i.style.backgroundColor=o.color));var s=e.render("column_name");return _.isString(s)&&(s=y.createElement("span",{dangerouslySetInnerHTML:{__html:e.render("column_name")||"&nbsp;"}})),j&&_.unset(i,"style.width"),y.createElement(H,(0,r.Z)({},i,{column:e,className:"altrp-table-th altrp-table-cell",key:n}),s,e.canGroupBy?y.createElement("span",(0,r.Z)({},e.getGroupByToggleProps(),{className:"altrp-table-th__group-toggle"}),e.isGrouped?(0,R.renderIcon)(z,q," 🛑 ","not-grouped-column"):(0,R.renderIcon)(W,K," 👊 ","grouped-column")):null,e.isSorted?e.isSortedDesc?(0,I.hX)().renderIcon("chevron",{className:"rotate-180 sort-icon "}):(0,I.hX)().renderIcon("chevron",{className:"sort-icon"}):"",e.column_is_filtered&&y.createElement("label",{className:"altrp-label altrp-label_".concat(e.column_filter_type),onClick:function(e){e.stopPropagation()}},e.render("Filter")),A&&y.createElement("div",(0,r.Z)({},c,{className:"altrp-table__resizer ".concat(e.isResizing?"altrp-table__resizer_resizing":"")})))})))})),p&&y.createElement("div",{className:"altrp-table-tr"},y.createElement("th",{className:"altrp-table-th altrp-table-th_global-filter altrp-table-cell",role:"cell",colSpan:He.length+B||1,style:{textAlign:"left"}},y.createElement(Pe,{widgetId:a,preGlobalFilteredRows:Ge,globalFilter:et,setGlobalFilter:Ve,settings:t})))),"success"===i?y.createElement(ie,{getTableBodyProps:je,prepareRow:Be,totalColumnsWidth:$e,rows:qe,visibleColumns:He,moveRow:function(e,t){var n=oe[e];se(D()(oe,{$splice:[[e,1],[t,0,n]]}))},settings:t,page:Ne,cardTemplate:te}):y.createElement("div",null,y.createElement("div",{className:"altrp-table-tr altrp-table-tr_loading"},y.createElement("div",{className:"altrp-table-td altrp-table-td_loading",colSpan:He.length+B||1},"loading"===i&&x||null)))),re&&lt&&y.createElement(ce.Z,lt))}function he(e,t){var n=e.column,r=n.filterValue,a=n.preFilteredRows,l=n.setFilter,o=n.filter_placeholder,i=(n.column_filter_type,n.column_is_filtered,a.length);return o=o?o.replace("{{count}}",i):"Search ".concat(i," records..."),y.createElement("input",{value:r||"",className:"altrp-field",onChange:function(e){l(e.target.value||void 0)},placeholder:o})}function Ee(e){var t=e.column,n=(t.filterValue,t.setFilter),r=t.preFilteredRows,a=t.id,l=t.filter_placeholder,o=t.null_placeholder,i=e.widgetId,c=y.useMemo((function(){var e=new Set;return r.forEach((function(t){e.add(t.values[a])})),(0,f.Z)(e.values()).map((function(e){var t=e;return t||_.isString(t)||(t=o||""),{value:e,label:t}}))}),[a,r]);return y.createElement(T.Z,{options:c,isMulti:!0,placeholder:l||"Select some...",className:"altrp-table__filter-select",classNamePrefix:i+" altrp-field-select2",onChange:function(e){_.isArray(e)||(e=[]);var t=e.map((function(e){return e.value}));n(t)}})}function ve(e){var t=e.column,n=t.filterValue,r=t.setFilter,a=t.preFilteredRows,l=t.id,o=t.filter_button_text,i=y.useMemo((function(){var e=a.length?a[0].values[l]:0;"##"===l&&a.length&&(e=a[0].index);var t=e,n=e;return a.forEach((function(e){var r=e.values[l];"##"===l&&(r=e.index),t=Math.min(r,t),n=Math.max(r,n)})),[t,n]}),[l,a]),c=(0,h.Z)(i,2),s=c[0],_=c[1],u=o||"Off";return y.createElement(y.Fragment,null,y.createElement("input",{type:"range",className:"altrp-field",min:s,max:_,value:n||s,onChange:function(e){r(parseInt(e.target.value,10))}}),y.createElement("button",{className:"altrp-btn ".concat(void 0!==n?"active":""),onClick:function(){return r(void 0)}},u))}function ye(e){var t=e.column,n=t.filterValue,r=void 0===n?[]:n,a=t.preFilteredRows,l=t.setFilter,o=t.filter_max_placeholder,i=t.filter_min_placeholder,c=t.id,s=y.useMemo((function(){var e=a.length?a[0].values[c]:0;"##"===c&&a.length&&(e=a[0].index);var t=e,n=e;return a.forEach((function(e){var r=e.values[c];"##"===c&&(r=e.index),t=Math.min(r,t),n=Math.max(r,n)})),[t,n]}),[c,a]),_=(0,h.Z)(s,2),u=_[0],p=_[1],d=i||"Min (".concat(u,")"),m=o||"Max (".concat(p,")");return y.createElement("div",{className:"altrp-filter-group",style:{display:"flex"}},y.createElement("input",{value:r[0]||"",type:"number",className:"altrp-field",onChange:function(e){var t=e.target.value;l((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t?parseInt(t,10):void 0,e[1]]}))},placeholder:d,style:{width:"70px",marginRight:"0.5rem"}}),"to",y.createElement("input",{value:r[1]||"",type:"number",className:"altrp-field",onChange:function(e){var t=e.target.value;l((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[e[0],t?parseInt(t,10):void 0]}))},placeholder:m,style:{width:"70px",marginLeft:"0.5rem"}}))}de.autoRemove=function(e){return!e||!e.length},me.autoRemove=function(e){return!e},ge.autoRemove=function(e){return!e},fe.autoRemove=function(e){return!e};var Oe=y.forwardRef((function(e,t){var n=e.indeterminate,l=e.icons,o=(0,a.Z)(e,se),i=y.useRef(),c=t||i;y.useEffect((function(){c.current.indeterminate=n}),[c,n]);var s=l.checkedIcon.name?o.checked?l.checkedIcon:n?l.indeterminateIcon:l.uncheckedIcon:null;return y.createElement("label",{className:"check-icon--"+(o.checked?"checked":n?"indeterminate":"unchecked")},s&&(0,R.renderAssetIcon)(s),y.createElement("input",(0,r.Z)({type:"checkbox",ref:c},o,{className:s?"hidden":""})))}));function Pe(e){var t=e.preGlobalFilteredRows,n=e.globalFilter,r=e.setGlobalFilter,a=e.widgetId,l=e.settings,o=l.global_filter_placeholder,i=l.global_filter_label,c=t.length,s=y.useState(n),_=(0,h.Z)(s,2),u=_[0],p=_[1],d=(0,C.useAsyncDebounce)((function(e){r(e||void 0)}),200),m=i||"Search:".concat(" "),g=o||"".concat(c," records...");return g=g.replace(/{{count}}/g,c),y.createElement("div",{className:"altrp-table-global-filter"},y.createElement("label",{htmlFor:"altrp-table-global-filter".concat(a),dangerouslySetInnerHTML:{__html:m}}),y.createElement("input",{id:"altrp-table-global-filter".concat(a),value:u||"",onChange:function(e){p(e.target.value),d(e.target.value)},placeholder:g}))}var we=function(e){if("datasource"===(e=ue({},e)).settings.choose_datasource){var t=y.useMemo((function(){return e.settings.inner_page_size>0?100:10}),[e.settings.inner_page_size]);return e._status="success",(0,R.isEditor)()&&((e=ue({},e)).settings=ue({},e.settings),e.data=Array.from({length:t},(function(){return{}})),(0,R.setAltrpIndex)(e.data)),y.createElement(be,e)}return y.createElement(x.Z,e,y.createElement(be,null))};function Me(e){var t=e.row,n=e.data,r=e.cell,a=e.value,l=e.updateData,o=r.column,i=y.useState(a),c=(0,h.Z)(i,2),s=c[0],u=c[1];y.useEffect((function(){u(a)}),[a,r]);var p,d,m=o.column_template,f=o.column_is_editable,E=o.column_edit_url,O=o.column_external_link,P=o.column_blank_link,w=o.edit_disabled,M=o.column_cell_content_type,D=o._accessor;if((D=(D=D||"").trim())&&-1!==D.indexOf("?")&&-1!==D.indexOf(":")){var C=D.split("?")[1].split(":"),x=(0,h.Z)(C,2);p=x[0],d=x[1],p=p.trim(),d=d.trim(),r.value=r.value?p:d}0===D.indexOf('"')&&'"'===D[D.length-1]&&(r.value=D.substring(1,D.length-1));var T=y.useState(null),I=(0,h.Z)(T,2),k=I[0],N=I[1],U=y.useMemo((function(){return f&&E?(0,R.parseURLTemplate)(E,t.original):null}),[E,f,t]),Z=y.useCallback((0,b.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.default.loadParsedTemplate(m);case 2:t=e.sent,N(t);case 4:case"end":return e.stop()}}),e)}))),[m]);y.useEffect((function(){m&&Z()}),[Z]);var W=r.value,K=(0,R.isEditor)()?"a":pe;switch(O&&!(0,R.isEditor)()&&(K="a"),_.isObject(r.value)&&(W=""),M){case"email":W=y.createElement("a",{href:"mailto:".concat(r.value),className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:0===r.value?"0":r.value||"&nbsp;"}});break;case"phone":W=y.createElement("a",{href:"tel:".concat(r.value),className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:0===r.value?"0":r.value||"&nbsp;"}});break;default:W=o.column_link?y.createElement(K,{to:(0,R.parseURLTemplate)(o.column_link,t.original),href:(0,R.parseURLTemplate)(o.column_link,t.original),target:P?"_blank":"",className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:0===r.value?"0":r.value||"&nbsp;"}}):y.createElement("span",{href:null,className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:0===r.value?"0":r.value||"&nbsp;"}})}var z=y.useMemo((function(){if(!k)return null;var e=A.default.cloneElement(k);return e.setCardModel(new j.Z(t.original||{})),y.createElement(e.componentClass,{element:e,ElementWrapper:L.default,children:e.children})}),[k,t.original,n]);return z?y.createElement("div",{className:"altrp-posts"},y.createElement("div",{className:"altrp-post overflow-visible"},z)):U&&!w?y.createElement(B.Z,{className:"altrp-inherit",route:U,resourceid:"",changevalue:function(e){u(e)},onBlur:function(e){l(t.index,D,e)},value:s}):_.get(r,"column.actions.length")?(0,g.IN)(r,t):_.isString(W)?W:y.createElement(y.Fragment,null,W)}var De=["style"],Re=["style"],Ce=["style"];function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=window.altrpHelpers,ke=Ie.getDataByPath,Se=Ie.getWidgetState,Ae=Ie.isEditor,je=Ie.storeWidgetState;(window.globalDefaults=window.globalDefaults||[]).push('\n.altrp-table-th {\n  text-align: center;\n  font-size: 14px;\n  font-weight: normal;\n  font-family: "Open Sans";\n  line-height: 1.5;\n  letter-spacing: 0;\n  padding: 0 0 0 0;\n  display: table-cell;\n}\n.altrp-table-td {\n  text-align: left;\n  padding: 0 0 0 0;\n  font-size: 14px;\n  font-weight: normal;\n  font-family: "Open Sans";\n  line-height: 1.5;\n  letter-spacing: 0;\n  display: table-cell;\n}\n.altrp-table-tbody--striped tr:nth-child(2n) {\n  background-color: rgba(0, 0, 50, .05);\n}\n.altrp-table-tbody,\n.altrp-table-th {\n  border-collapse: separate;\n  user-select: none;\n}\n.altrp-table-td__grouping {\n  font-size: 18px;\n  font-weight: bold;\n}\n.altrp-table-th_sort {\n  padding: 0;\n  margin-left: 10px;\n}\n.altrp-table-th .sort-icon {\n  margin-left: 10px;\n}\n.altrp-table {\n  overflow: hidden;\n  display: table;\n  width: 100%;\n  border-collapse: collapse;\n  border-width: 1px 1px 1px 1px;\n  border-color: rgb(186, 186, 186);\n}\n.altrp-table__filter-select {\n  width: 100%;\n}\n.altrp-table__filter-select .altrp-field-select2__placeholder {\n  white-space: nowrap;\n}\n.altrp-table__filter-select .altrp-field-select2__single-value {\n  font-size: 14px;\n}\n.altrp-table__filter-select .altrp-field-select2__indicator-separator {\n  display: none;\n}\n.altrp-table__filter-select .altrp-field-select2__indicator {\n  align-items: center;\n}\n.altrp-table__filter-select .altrp-field-select2__control {\n  width: 100%;\n  min-height: 19px;\n  padding: 0;\n  border-radius: 0;\n  outline: none;\n  border-color: rgb(142, 148, 170);\n  -webkit-box-shadow: none;\n  -moz-box-shadow: none;\n  box-shadow: none;\n}\n.altrp-table__filter-select .altrp-field-select2__control input {\n  border: none;\n}\n.altrp-table__filter-select .altrp-field-select2__value-container {\n  padding-top: 0;\n  padding-bottom: 0;\n  line-height: 13px;\n}\n.altrp-table-td__grouping {\n  -webkit-transition-duration: 0.2s;\n  -moz-transition-duration: 0.2s;\n  -ms-transition-duration: 0.2s;\n  -o-transition-duration: 0.2s;\n  transition-duration: 0.2s;\n}\n.altrp-table-td_alignment .altrp-table-td_alignment-center .altrp-actions{\n  justify-content: center;\n}\n.altrp-table-td_alignment-right .altrp-actions {\n  justify-content: flex-end;\n}\n.altrp-table__collapse-icon {\n  display: inline-block;\n}\n.altrp-table__collapse-icon .altrp-table__collapse-icon svg {\n  position: relative;\n}\n\n.altrp-table-head {\n  display: table-header-group;\n}\n\n.altrp-table-tbody {\n  display: table-row-group;\n}\n\n.altrp-table-foot {\n  display: table-footer-group;\n}\n\n.altrp-table-tr {\n  display: table-row;\n}\n\n.altrp-table_loading {\n  display: block;\n}\n\n.altrp-table-th_global-filter {\n  colspan: all;\n}\n\n.altrp-table-td .altrp-inherit{\n  border: none;\n  width: 100%;\n}\n.altrp-table-td_loading {\n  display: block;\n  width: 100%;\n}\n\n.altrp-table__resizer {\n  display: inline-block;\n  background: blue;\n  width: 10px;\n  height: 100%;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: translateX(50%);\n  z-index: 1;\n  touch-action: none;\n}\n.altrp-table__resizer_resizing {\n    background: red;\n}\n.altrp-table .altrp-table-td .altrp-table-td__double-click-content {\n  display: none;\n}\n.altrp-table .altrp-table-td .altrp-table-td_double-clicked .altrp-table-td_double-clicked .altrp-table-td__double-click-content {\n  display: block;\n  width: 100%;\n  border-width: 2px;\n}\n.altrp-table .altrp-table-td .altrp-table-td_double-clicked .altrp-table-td_double-clicked .altrp-table-td__default-content {\n  display: none;\n}\n.altrp-table-global-filter {\n  font-weight: 400;\n}\n.altrp-table-global-filter label {\n  display: inline-block;\n}\n');var Le=function(e){(0,s.Z)(f,e);var t,n,l=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,p.Z)(t);if(n){var a=(0,p.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,u.Z)(this,e)});function f(e){var t;return(0,o.Z)(this,f),(t=l.call(this,e)).state={settings:e.element.getSettings(),TableComponent:function(){return React.createElement("div",{children:"Loading..."})}},e.element.component=(0,c.Z)(t),window.elementDecorator&&window.elementDecorator((0,c.Z)(t)),e.baseRender&&(t.render=e.baseRender((0,c.Z)(t))),t.scrollbar=React.createRef(),t}return(0,i.Z)(f,[{key:"_componentDidMount",value:function(){var e=this;this.props.element.getSettings("store_state")&&Se(this.props.element.getId())?this.setState((function(t){return Te(Te({},t),{},{widgetState:Se(e.props.element.getId())})})):this.props.element.getSettings("store_state")&&je(this.props.element.getId(),null)}},{key:"showTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"datasource"===this.props.element.getSettings("choose_datasource")||!(!e.modelName&&!e.dataSource)}},{key:"render",value:function(){var e,t=this.props.element.getSettings();if(!this.props.currentModel.getProperty("altrpModelUpdated"))return"";var n=[];if(this.props.element.getSettings("table_datasource")&&"datasource"===this.props.element.getSettings("choose_datasource")){var l=this.props.element.getSettings("table_datasource").replace(/{{/g,"").replace(/}}/g,"");n=ke(l,[],this.props.element.getCurrentModel().getData())}this.query&&this.table_query&&this.table_query===this.props.element.getSettings().table_query||(this.table_query=this.props.element.getSettings().table_query,this.query=new d.Z(this.props.element.getSettings().table_query||{},this));var o=this.query;if(!this.showTable(o))return React.createElement("div",{children:"Please Choose Source"});var i={ref:this.scrollbar,style:{zIndex:99999},autoHeight:!0,autoHideTimeout:500,autoHideDuration:200,renderTrackVertical:function(e){var t=e.style,n=(0,a.Z)(e,De);return React.createElement("div",(0,r.Z)({className:"altrp-scroll__vertical-track",style:t},n))}};if(this.props.element.getSettings("table_transpose",!1)&&(i.autoHeight=!0,i.autoHeightMax=1e4),!_.get(t,"tables_columns.length"))return React.createElement("div",{children:"Please Add Column"});var c=this.props.element.getSettings("table_2_0")?we:g.ZP;return React.createElement(m.$B,{ref:this.scrollbar,style:{zIndex:99999},autoHide:!0,autoHeightMax:3e4,autoHeight:!0,autoHideTimeout:500,autoHideDuration:200,renderTrackVertical:function(e){var t=e.style,n=(0,a.Z)(e,Re);return t.display="none",React.createElement("div",(0,r.Z)({className:"altrp-scroll__vertical-track",style:t},n))},renderTrackHorizontal:function(e){var t=e.style,n=(0,a.Z)(e,Ce);return React.createElement("div",(0,r.Z)({className:"altrp-scroll__horizontal-track",style:t},n))}},React.createElement(c,{query:o,updateToken:this.props.updateToken,widgetId:this.props.element.getId(),widgetState:Ae()?null:this.state.widgetState,currentModel:this.props.currentModel,currentScreen:this.props.currentScreen,data:Ae()?null:n||o.getFromModel(this.state.modelData),settings:null===(e=this.props.element)||void 0===e?void 0:e.settings}))}}]),f}(Component)}}]);
//# sourceMappingURL=TableWidget.e2f76bbe5909d1d522c3.bundle.js.map