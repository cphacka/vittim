(self.webpackChunk=self.webpackChunk||[]).push([[4894],{71743:function(e,t,n){"use strict";var r=n(6610),a=n(5991),o=n(83465),i=n.n(o),u=n(29208),s=n.n(u),l=n(31468),c=n.n(l),p=n(38394),m=n.n(p),f=n(96633),d=n.n(f),h=n(99245),g=n.n(h),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,e),this.data=i()(t)}return(0,a.Z)(e,[{key:"getData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?i()(this.data):this.data}},{key:"isEmpty",value:function(){return g()(this.data)}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s()(this.data,e,t)}},{key:"hasProperty",value:function(e){return m()(this.data,e)}},{key:"setProperty",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n instanceof e&&(n=n.getData(!1)),c()(this.data,t,n)}},{key:"unsetProperty",value:function(e){return d()(this.data,e)}}]),e}();window.AltrpModel=v,t.Z=v},78578:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r=n(96156),a=n(92137),o=n(6610),i=n(5991),u=n(63349),s=n(10379),l=n(46070),c=n(77608),p=n(87757),m=n.n(p),f=n(38773);function d(){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)(m().mark((function e(){var t,n,r,a=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:""){e.next=3;break}return e.abrupt("return",null);case 3:return n=new f.Z({route:"/ajax/menus"}),e.next=6,n.get(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n(5998);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=window.altrpHelpers,w=y.isEditor,k=y.mbParseJSON,O=y.conditionChecker,R=(y.renderAsset,window.altrpLibs.Blueprint),T=R.Button,D=R.ButtonGroup,E=R.Menu,M=R.MenuItem,P=R.Position,S=window.altrpLibs.Popover2;(window.globalDefaults=window.globalDefaults||[]).push("\n.altrp-menu-item__icon svg {\n    display: block;\n    height: 20px;\n    width: 20px;\n}\n\n.altrp-menu {\n  display: flex;\n  flex-wrap: wrap;\n}\n");var I=function(e){(0,s.Z)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function p(e){var t;return(0,o.Z)(this,p),(t=r.call(this,e)).getMenuData=(0,a.Z)(m().mark((function e(){var n,r,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props.element.getResponsiveSetting("menu"),(!t.state.menuData&&n||t.menuGUID!==n)&&!t.loading){e.next=3;break}return e.abrupt("return");case 3:if(t.loading=!0,r=appStore.getState().altrpMenus,a=r.find((function(e){return e.guid===n}))){e.next=11;break}return e.next=9,d(n);case 9:(a=e.sent)&&(a.children=k(a.children),a.settings=k(a.settings),appStore.dispatch((0,g.bL)(a)));case 11:t.setState((function(e){return b(b({},e),{},{menuData:a})}),(function(){t.loading=!1,t.menuGUID=n}));case 12:case"end":return e.stop()}}),e)}))),t.getMenuClasses=function(){return["altrp-menu"].join(" ")},t.renderSubItems=function(e,n){if(!e.length)return null;t.props.element;var r={usePortal:!0,portalClassName:"altrp-portal altrp-portal".concat(t.elementId),portalContainer:window.EditorFrame?window.EditorFrame.contentWindow.document.body:document.body};if(t.props.element.getResponsiveSetting("button"),1===n){var a=t.props.element.getResponsiveSetting("popover_position","","auto");r.position=t.getPosition(a),r.portalClassName+=" altrp-menu-first-portal"}else{var o=t.props.element.getResponsiveSetting("sub_popover_position","","auto");r.position=t.getPosition(o),r.portalClassName+=" altrp-sub-portal"}return React.createElement(React.Fragment,null,e.map((function(e){return React.createElement(M,{popoverProps:r,depth:n,href:e.url,width:100,className:"altrp-menu-item altrp-menu-item".concat(t.elementId," ").concat(t.mbItemActive(e)?"active":""),key:e.id,onClick:function(n){n.preventDefault(),!w()&&e.url&&(t.props.history&&e.url?t.props.history.push(e.url):window.location.href=e.url)},icon:React.createElement("span",{className:"altrp-menu-item__icon",dangerouslySetInnerHTML:{__html:e.icon}}),text:e.label},t.renderSubItems(e.children,n+1))})))},t.renderButton=function(){var e=t.state.menuData;if(!e)return null;var n=_.get(e,"settings.toggle_icon",""),r=t.props.element.getResponsiveSetting("popover_position_toggle","","auto");return React.createElement(S,{content:t.renderVerticalMenu(),className:"altrp-popover",position:r,portalContainer:window.EditorFrame?window.EditorFrame.contentWindow.document.body:document.body,portalClassName:"altrp-portal altrp-portal_main altrp-portal".concat(t.elementId),minimal:!0},React.createElement(T,{className:"altrp-menu-toggle",text:n?React.createElement("span",{className:"altrp-menu-item__icon",dangerouslySetInnerHTML:{__html:n}}):""}))},t.state={},window.elementDecorator&&window.elementDecorator((0,u.Z)(t)),e.baseRender&&(t.render=e.baseRender((0,u.Z)(t))),t.elementId=e.element.getId(),t}return(0,i.Z)(p,[{key:"renderHorizontalMenu",value:function(){var e=this;this.getMenuData();var t=this.state.menuData;return t?React.createElement(D,{fill:!0,alignText:"left"},t.children.map((function(t){return React.createElement(T,{minimal:!0,icon:React.createElement("span",{className:"altrp-menu-item__icon",dangerouslySetInnerHTML:{__html:t.icon}}),rightIcon:"caret-down",text:t.label,href:t.url,key:t.id,onClick:function(n){n.preventDefault(),t.url&&!w()&&(e.props.history?e.props.history.push(t.url):window.location.href=t.url)}})}))):"Select Menu"}},{key:"renderVerticalMenu",value:function(){this.getMenuData();var e=this.state.menuData;return e?React.createElement(E,{className:this.getMenuClasses()},this.renderSubItems(e.children,1)):"Select Menu"}},{key:"getPosition",value:function(e){var t;switch(e){case"auto":t="auto";break;case"top-left":t=P.TOP_LEFT;break;case"top-right":t=P.TOP_RIGHT;break;case"top":t=P.TOP;break;case"bottom-left":t=P.BOTTOM_LEFT;break;case"bottom-right":t=P.BOTTOM_RIGHT;break;case"bottom":t=P.BOTTOM;break;case"left-top":t=P.LEFT_TOP;break;case"left-bottom":t=P.LEFT_BOTTOM;break;case"left":t=P.LEFT;break;case"right-top":t=P.RIGHT_TOP;break;case"right-bottom":t=P.RIGHT_BOTTOM;break;case"right":t=P.RIGHT;break;default:t=P.AUTO}return t}},{key:"render",value:function(){this.getMenuData();var e=this.props.element.getResponsiveSetting("type");if(this.props.element.getResponsiveSetting("button"))return React.createElement(React.Fragment,null,this.renderButton());switch(e){case"horizontal":default:return React.createElement(React.Fragment,null,this.renderVerticalMenu())}}},{key:"mbItemActive",value:function(e){return!!(e&&e.operator&&e.value&&e.modelField)&&O(e,this.props.element.getCurrentModel())}}]),p}(Component)},5998:function(e,t,n){"use strict";n.d(t,{QF:function(){return r},l2:function(){return a},bL:function(){return o}});var r="ADD_MENU",a="ADD_MENUS";function o(e){return{type:r,menu:e}}}}]);
//# sourceMappingURL=MenuWidget.bfce5330d6d0d2245756.bundle.js.map