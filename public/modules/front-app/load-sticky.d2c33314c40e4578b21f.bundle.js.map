{"version":3,"sources":["webpack:///./resources/modules/front-app/src/js/functions/load-sticky.js"],"names":["loadSticky","document","querySelector","loadJQuery","frontAppContainer","getElementById","$","length","loadStickyJS","window","altrpLibs","Sticky","console","error","sticky","stickyContainer","stickyClass","addEventListener","update","loadStickyPlugin","each","$this","this","stickyOptions","data","topSpacing","bottomSpacing","attr","promise","Promise","res","rej","resolve","reject","jQueryStickyPluginScript","head","appendChild","createElement","innerHTML","setAttribute","onload","onerror","default"],"mappings":"iNACe,SAAgBA,IAA/B,+B,wCAAe,8FACTC,SAASC,cAAc,uDADd,iCAEgB,+BAFhB,uBAEJC,EAFI,EAEJA,WAFI,SAGLA,IAHK,UAILC,EAAoBH,SAASI,eAAe,cAC/CC,EAAE,oCAAoCC,OAL9B,kCAMHC,IANG,WAOJC,OAAOC,WAAeD,OAAOC,UAAUC,OAPnC,wBAQPC,QAAQC,MAAM,8BARP,2BAWLC,EAAS,IAAIL,OAAOC,UAAUC,OAAO,mCAAoC,CAC3EI,gBAAiB,gBACjBC,YAAa,sBAEfZ,EAAkBa,iBAAiB,UAAU,WAC3CH,EAAOI,YAhBA,YAmBRZ,EAAE,6DAA6DC,OAnBvD,kCAoBHY,IApBG,QAsBXb,EAAE,uDAAuDc,MAAK,WAC5D,IAAIC,EAAQf,EAAEgB,MACRC,EAAgB,GAItB,OAAOF,EAAMG,KAAK,iBAChB,IAAK,MACHD,EAAcE,WAAaJ,EAAMG,KAAK,yBAA2B,EACjEH,EAAMP,OAAOS,GACbnB,EAAkBa,iBAAiB,UAAU,WAC3CI,EAAMP,OAAO,aAEhB,MACD,IAAK,SACHS,EAAcG,cAAgBL,EAAMG,KAAK,yBAA2B,EAMxEH,EAAMM,KAAK,4BAA4B,MA3C9B,6C,sBAoDR,SAAeR,IAAtB,+B,wCAAO,6FAGCS,EAAU,IAAIC,SAAQ,SAACC,EAAKC,GAChCC,EAAUF,EACVG,EAASF,MAER9B,SAASC,cAAc,2CAPrB,wDAWCgC,EAA2BjC,SAASkC,KAAKC,YAAYnC,SAASoC,cAAc,WACxDpC,SAASkC,KAAKC,YAAYnC,SAASoC,cAAc,UACzDC,UAAlB,8CACAJ,EAAyBK,aAAa,MAAO,6BAE7CL,EAAyBM,OAAS,WAChCR,GAAWA,KAEbE,EAAyBO,QAAU,WACjCR,GAAUA,KApBP,kBAuBEL,GAvBF,6C,+BA8BQpB,I,uEAAf,iFACEC,OAAOC,UAAYD,OAAOC,WAAa,IACpCD,OAAOC,UAAUC,OAFtB,wDAKwBV,SAASkC,KAAKC,YAAYnC,SAASoC,cAAc,UACzDC,UAAd,iDANF,SAOmC,qCAPnC,OAOE7B,OAAOC,UAAUC,OAPnB,OAOwD+B,QAPxD,4C","file":"load-sticky.d2c33314c40e4578b21f.bundle.js","sourcesContent":["\r\nexport default async function  loadSticky() {\r\n  if (document.querySelector('[data-altrp-sticky]:not([data-altrp-sticky-loaded])')) {\r\n    const {loadJQuery} = await import('../helpers/plugins');\r\n    await loadJQuery();\r\n    const frontAppContainer = document.getElementById('front-app');\r\n    if($('[data-altrp-sticky=\"column_top\"]').length) {\r\n      await loadStickyJS()\r\n      if(! window.altrpLibs || ! window.altrpLibs.Sticky){\r\n        console.error('Не загрузилось \"sticky-js\"');\r\n        return\r\n      }\r\n      let sticky = new window.altrpLibs.Sticky('[data-altrp-sticky=\"column_top\"]', {\r\n        stickyContainer: '.altrp-column',\r\n        stickyClass: 'sticky-js-wrapper',\r\n      });\r\n      frontAppContainer.addEventListener('scroll', ()=>{\r\n        sticky.update()\r\n      })\r\n    }\r\n    if($('[data-altrp-sticky]:not([data-altrp-sticky=\"column_top\"])').length){\r\n      await loadStickyPlugin();\r\n    }\r\n    $('[data-altrp-sticky]:not([data-altrp-sticky-loaded])').each(function(){\r\n      let $this = $(this)\r\n      const stickyOptions = {\r\n\r\n      };\r\n\r\n      switch($this.data('altrp-sticky')){\r\n        case 'top':{\r\n          stickyOptions.topSpacing = $this.data('altrp-sticky-spacing') || 0\r\n          $this.sticky(stickyOptions)\r\n          frontAppContainer.addEventListener('scroll', ()=>{\r\n            $this.sticky('update')\r\n          })\r\n        }break;\r\n        case 'bottom':{\r\n          stickyOptions.bottomSpacing = $this.data('altrp-sticky-spacing') || 0\r\n        }break;\r\n        case 'column_top':{\r\n        }break;\r\n      }\r\n\r\n      $this.attr('data-altrp-sticky-loaded', true)\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * Загружаем jQuery, если не заргужен\r\n * @return {Promise<void>}\r\n */\r\nexport async function loadStickyPlugin(){\r\n  let resolve, reject;\r\n\r\n  const promise = new Promise((res, rej) => {\r\n    resolve = res;\r\n    reject = rej;\r\n  });\r\n  if(document.querySelector('script[src=\"/plugins/jquery.sticky.js\"]')){\r\n    return;\r\n  }\r\n\r\n  const jQueryStickyPluginScript = document.head.appendChild(document.createElement('script'));\r\n  const stickyPluginStyle = document.head.appendChild(document.createElement('style'));\r\n  stickyPluginStyle.innerHTML = `.sticky-wrapper{width:100%;z-index: 10000;}`\r\n  jQueryStickyPluginScript.setAttribute('src', '/plugins/jquery.sticky.js');\r\n\r\n  jQueryStickyPluginScript.onload = () => {\r\n    resolve && resolve()\r\n  };\r\n  jQueryStickyPluginScript.onerror = () => {\r\n    reject && reject()\r\n  };\r\n\r\n  return promise;\r\n}\r\n\r\n/**\r\n *\r\n * @returns {Promise<void>}\r\n */\r\nasync function loadStickyJS(){\r\n  window.altrpLibs = window.altrpLibs || {};\r\n  if(window.altrpLibs.Sticky){\r\n    return\r\n  }\r\n  const stickyJSStyle = document.head.appendChild(document.createElement('style'));\r\n  stickyJSStyle.innerHTML = `.sticky-js-wrapper{width:100%;z-index: 10000;}`\r\n  window.altrpLibs.Sticky = (await import('sticky-js')).default;\r\n}\r\n"],"sourceRoot":""}