(self.webpackChunk=self.webpackChunk||[]).push([[1301],{1987:function(e,t,n){"use strict";n.d(t,{hX:function(){return a}}),n(87757);var r=n(37895);function a(){return window.iconsManager||(window.iconsManager=new r.default),window.iconsManager}n(38773),n(96486)},71743:function(e,t,n){"use strict";var r=n(6610),a=n(5991),i=n(83465),s=n.n(i),o=n(29208),c=n.n(o),l=n(31468),u=n.n(l),f=n(38394),p=n.n(f),h=n(96633),m=n.n(h),v=n(99245),d=n.n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,e),this.data=s()(t)}return(0,a.Z)(e,[{key:"getData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?s()(this.data):this.data}},{key:"isEmpty",value:function(){return d()(this.data)}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c()(this.data,e,t)}},{key:"hasProperty",value:function(e){return p()(this.data,e)}},{key:"setProperty",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n instanceof e&&(n=n.getData(!1)),u()(this.data,t,n)}},{key:"unsetProperty",value:function(e){return m()(this.data,e)}}]),e}();window.AltrpModel=y,t.Z=y},75738:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(96156),a=n(6610),i=n(5991),s=n(10379),o=n(46070),c=n(77608),l=n(67294),u=n(22122),f=n(1987),p=n(76593);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){(0,s.Z)(h,e);var t,n,r=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function h(e){var t;return(0,a.Z)(this,h),(t=r.call(this,e)).labelClick=function(e){(0,p.isEditor)()&&e.preventDefault()},t.deleteItem=function(e,n){e.preventDefault();var r=t.state.files;r.splice(n,1);var a=[];r.length||t.setState((function(e){return m(m({},e),{},{filesForDisplay:a,files:r})})),console.log(r),_.each(r,(function(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){a.push({src:n.result,alt:e.name||""}),a.length===r.length&&t.setState((function(e){return m(m({},e),{},{filesForDisplay:a,files:r})}))}})),_.isFunction(t.props.onChange)&&t.props.onChange(r)},t.onChange=function(e){if(!(!e.target.files instanceof FileList)){var n=[],r=t.props.settings.content_accept?t.props.settings.content_accept.split(","):[];_.each(e.target.files,(function(e){r.forEach((function(t){t=(t=t.trim()).replace("*",""),0===e.type.indexOf(t)&&n.push(e)}))}));var a=[];n.length||t.setState((function(e){return m(m({},e),{},{filesForDisplay:a,files:n})})),_.each(n,(function(e){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){a.push({src:r.result,alt:e.name||""}),a.length===n.length&&(console.log(a),t.setState((function(e){return m(m({},e),{},{filesForDisplay:a,files:n})})))}})),_.isFunction(t.props.onChange)&&t.props.onChange(n)}},t.state={filesForDisplay:[],files:[]},t}return(0,i.Z)(h,[{key:"render",value:function(){var e=this,t=this.props.settings.select2_multiple,n=this.props.settings.content_placeholder||"",r=this.state.filesForDisplay,a=this.props.settings.content_accept||"",i=["altrp-field-file"];return r.length||i.push("altrp-field-file_empty"),l.createElement("label",{className:i.join(" "),onClick:this.labelClick},l.createElement("span",{className:"altrp-field-file__placeholder"},n),l.createElement("input",{type:"file",className:"altrp-field-file__field",multiple:t,accept:a,onChange:this.onChange}),l.createElement("span",{className:"altrp-field-file-media-list media-list"},(0,p.isEditor)()?l.createElement("span",{className:"media-list-item"},(0,f.hX)().renderIcon("times",{className:"media-list-item__remove"}),(0,p.renderAsset)({},{className:"media-list-item__img"})):r.map((function(t,n){return l.createElement("span",{key:n,className:"media-list-item"},(0,f.hX)().renderIcon("times",{className:"media-list-item__remove",onClick:function(t){e.deleteItem(t,n)}}),l.createElement("img",(0,u.Z)({className:"media-list-item__img"},t)))}))))}}]),h}(l.Component),d=n(63349);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){(0,s.Z)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,a.Z)(this,u),(t=r.call(this,e)).state={previewValue:"",value:"",max:0,type:[],mask:_.clone(e.inputProps.settings.content_mask)},t.inputRef=l.createRef(),t.handleChange=t.handleChange.bind((0,d.Z)(t)),t.updateMask=t.updateMask.bind((0,d.Z)(t)),t.handleBackspace=t.handleBackspace.bind((0,d.Z)(t)),t}return(0,i.Z)(u,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(t){return b(b({},t),{},{mask:e.props.mask})})),this.updateMask()}},{key:"updateMask",value:function(){var e=this.state.mask,t=this.state.value,n="",r=!1,a=e.split(""),i=0,s=0,o="",c=(e.match(/0/g)||[]).length,l=(e.match(/_/g)||[]).length;if(s+=c+l,l>0?o="string":c>0&&(o="number"),t){var u,f=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}(a);try{for(f.s();!(u=f.n()).done;){var p=u.value,h=t[i];if(!h&&""!==p)break;if("}"===p&&(r=!1),r)n+=p;else switch(p){case"0":isNaN(h)||h&&(n+=h,i+=1);break;case"_":h&&(n+=h,i+=1);break;default:n+=p}}}catch(e){f.e(e)}finally{f.f()}}return this.setState((function(e){return b(b({},e),{},{previewValue:n,max:s,type:o})})),n}},{key:"handleChange",value:function(e){var t=this;if(this.state.value.length<this.state.max){var n=e.target.value.slice(-1);switch(this.state.type){case"number":isNaN(n)||this.setState((function(e){return b(b({},e),{},{value:e.value+n})}),(function(){t.updateMask(),t.props.inputProps.onChange({target:{value:t.state.value}})}));break;default:this.setState((function(e){return b(b({},e),{},{value:e.value+n})}),(function(){t.updateMask(),t.props.inputProps.onChange({target:{value:t.state.value}})}))}}}},{key:"handleBackspace",value:function(e){var t=this;"Backspace"===e.key&&(this.setState((function(e){return b(b({},e),{},{value:e.value.slice(0,-1)})}),(function(){t.updateMask()})),e.preventDefault())}},{key:"componentDidUpdate",value:function(e,t,n){var r=this.props.inputProps.settings.content_mask;this.state.mask!==r&&(this.setState((function(e){return b(b({},e),{},{mask:r,previewValue:"",value:"",type:[],max:0})})),this.updateMask())}},{key:"render",value:function(){return l.createElement(this.props.input,b(b({},this.props.inputProps),{},{inputRef:this.inputRef,onChange:this.handleChange,onKeyDown:this.handleBackspace,value:this.state.previewValue}))}}]),u}(l.Component);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.e(882).then(n.bind(n,70882));var j=function(e){(0,s.Z)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function u(){var e;(0,a.Z)(this,u);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).state={isValid:!0},e}return(0,i.Z)(u,[{key:"render",value:function(){var e=this,t=window.altrpLibs.Blueprint.InputGroup,n=this.state.isValid,r=this.props.settings,a=r.content_type,i=r.content_mask,s=r.mask_mismatch_message,o=w(w({},this.props),{},{inputRef:this.props.inputRef});switch(a){case"file":return l.createElement(v,o)}return i?l.createElement(l.Fragment,null,l.createElement(k,{mask:i,inputProps:o,input:t}),!n&&s&&l.createElement("p",{className:"mask-mismatch-message"},s)):("email"===a&&s&&(o.onBlur=function(t){e.props.onBlur(t),e.setState({isValid:(0,p.validateEmail)(t.target.value)})},n||(o.onChange=function(t){e.props.onChange(t),e.setState({isValid:(0,p.validateEmail)(t.target.value)})})),l.createElement(l.Fragment,null,l.createElement(t,o),!n&&"email"===a&&s&&l.createElement("p",{className:"mask-mismatch-message"},s)))}}]),u}(l.Component)}}]);
//# sourceMappingURL=1301.5a8e8713c4d76f61de5d.bundle.js.map