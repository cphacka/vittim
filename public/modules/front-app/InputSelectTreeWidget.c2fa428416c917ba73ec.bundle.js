(self.webpackChunk=self.webpackChunk||[]).push([[2299],{70197:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(22122),_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(81253),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(85061),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(96156),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(92137),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6610),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(5991),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(63349),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10379),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(46070),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(77608),_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(32465),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(87757),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),match_sorter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(90233),_front_app_src_js_store_forms_data_storage_actions__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(48379),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(67294),_helpers_recurse_each__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(74436),_excluded=["isOpen","ref"],_templateObject;function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw l}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=(0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__.Z)(e);if(t){var a=(0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__.Z)(this,n)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var _window$altrpHelpers=window.altrpHelpers,convertData=_window$altrpHelpers.convertData,isEditor=_window$altrpHelpers.isEditor,parseOptionsFromSettings=_window$altrpHelpers.parseOptionsFromSettings,parseParamsFromString=_window$altrpHelpers.parseParamsFromString,replaceContentWithData=_window$altrpHelpers.replaceContentWithData,renderAssetIcon=_window$altrpHelpers.renderAssetIcon,renderAsset=_window$altrpHelpers.renderAsset,getDataByPath=_window$altrpHelpers.getDataByPath,Resource=_window$altrpHelpers.Resource,getDataFromLocalStorage=_window$altrpHelpers.getDataFromLocalStorage,Button=window.altrpLibs.Blueprint.Button,MenuItem=window.altrpLibs.Blueprint.MenuItem,Popover=window.altrpLibs.Popover2,TreeBlueprint=window.altrpLibs.Blueprint.Tree,Alignment=window.altrpLibs.Blueprint.Alignment,InputGroup=window.altrpLibs.Blueprint.InputGroup;(window.globalDefaults=window.globalDefaults||[]).push('\n\n.altrp-select-tree {\n  display: flex;\n  grid-gap: 5px;\n  flex-direction: column;\n}\n\n.altrp-select-tree_popover{\n  .bp3-tree{\n    max-height: 250px;\n    overflow: auto;\n  }\n  .bp3-tree-node{\n    cursor: pointer;\n  }\n}\n\n.altrp-field {\n  border-style: solid;\n  width: 100%;\n}\n.altrp-field-file{\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.altrp-portal_input-select .bp3-menu{\n  max-height: 300px;\n  overflow: auto;\n}\n.altrp-widget_input-select .bp3-icon_right{\n    margin:  0 0 0 7px;\n}\n.bp3-icon_text-widget img{\n  width: 16px;\n  height: 16px;\n  object-fit: contain;\n  pointer-events: none;\n}\n.bp3-icon_text-widget svg{\n  width: 16px;\n  height: 16px;\n  pointer-events: none;\n}\n\n.altrp-select-tree-btn.altrp-select-tree-btn {\n  justify-content: flex-end;\n  padding-right:\n}\n\n.altrp-select-tree-btn.altrp-select-tree-btn.altrp-select-tree-btn .bp3-icon-caret-down.bp3-icon-caret-down {\n  margin: 0;\n}\n\n.altrp-select-tree-btn .bp3-button-text {\n  flex: 1;\n}\n\n.altrp-widget_input-select.altrp-widget_input-select .bp3-icon:first-child:last-child{\n   margin: 0;\n}\n.altrp-widget_input-select .bp3-popover-wrapper{\n  overflow: hidden;\n  display: flex;\n}\n.altrp-widget_input-select .bp3-popover-target > div{\n  width: 100%;\n}\n.altrp-widget_input-select .bp3-popover-target{\n  display: flex;\n  flex-grow: 1;\n}\n.altrp-widget_input-select .bp3-popover-target .bp3-button{\n  width: 100%;\n  justify-content: flex-end;\n  /*flex-direction: row-reverse;*/\n\n}\n.altrp-widget_input-select .bp3-popover-target .bp3-button .bp3-button-text{\n  flex-grow: 1;\n}\n.altrp-label-icon svg,\n.altrp-label-icon img {\n  width: 20px;\n}\n.altrp-label-icon svg{\n  height: 20px;\n}\n.altrp-field-file__field{\n  display: none;\n}\n.altrp-field-file__placeholder{\n  display: none;\n}\n.altrp-field-file_empty .altrp-field-file__placeholder{\n  display: block;\n  padding: 10px 20px;\n  border: none;\n  cursor: pointer;\n  background-color: rgb(52,59,76);\n  color: #fff;\n}\n.input-clear-btn {\n  background: transparent;\n  padding: 0;\n  position: absolute;\n  bottom: calc(50% - 7px);\n  right: 15px;\n  display: none;\n}\n.input-clear-btn:hover {\n  font-weight: bold;\n}\n.altrp-field:hover + .input-clear-btn, .input-clear-btn:hover {\n  display: block;\n}\n.altrp-input-wrapper, .altrp-field-select2 {\n  position: relative;\n  flex-grow: 1;\n}\n.altrp-field-label--required::after {\n  content: "*";\n  color: red;\n  font-size: inherit;\n  padding-left: 10px;\n}\n.altrp-field-label {\n  font-size: 16px;\n  font-family: "Open Sans";\n  line-height: 1.5;\n  letter-spacing: 0;\n}\n.altrp-field-select2__single-value, .altrp-field {\n  font-size: 16px;\n  font-family: "Open Sans";\n  line-height: 1.5;\n  letter-spacing: 0;\n}\n.altrp-field-select2__control, .altrp-field {\n  text-align: left;\n  padding-top: 2px;\n  padding-right: 2px;\n  padding-bottom: 2px;\n  padding-left: 2px;\n  border-width: 1px;\n}\n.altrp-field-select2__control:hover{\n  border-width: 1px;\n}\n.altrp-field-container {\n  margin: 0;\n}\n.altrp-field::placeholder, .altrp-field-select2__placeholder {\n  font-size: 13px;\n  font-family: "Open Sans";\n  line-height: 1.5;\n  letter-spacing: 0;\n}\n.altrp-image-select {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n.altrp-image-select img {\n  flex-grow: 1;\n  object-fit: contain;\n}\n.altrp-field {\n  overflow: hidden;\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n.altrp-field.active {\n  border-color: lightcoral;\n}\n.altrp-field-label {\n  text-align: center;\n  display: block;\n}\n.altrp-pagination__select-size .altrp-field-select2__single-value {\n  font-size: 14px;\n}\n.altrp-pagination__select-size .altrp-field-select2__indicator-separator {\n  display: none;\n}\n.altrp-pagination__select-size .altrp-field-select2__indicator {\n  align-items: center;\n}\n.altrp-pagination__select-size .altrp-field-select2__control {\n  width: 100px;\n  min-height: 32px;\n  padding: 0;\n  border-radius: 0;\n  outline: none;\n  border-color: rgb(142,148,170);\n  -webkit-box-shadow: none;\n  -moz-box-shadow: none;\n  box-shadow: none;\n}\n.altrp-pagination__select-size .altrp-field-select2__control input {\n  border: none;\n}\n.altrp-field-select2 {\n  position: relative;\n  box-sizing: border-box;\n  pointer-events: none;\n}\n.altrp-field-select2__control {\n  webkit-align-items: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  background-color: hsl(0,0%,100%);\n  border-color: hsl(0,0%,80%);\n  border-style: solid;\n  border-width: 1px;\n  cursor: default;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n  min-height: 38px;\n  outline: 0 !important;\n  position: relative;\n  -webkit-transition: all 100ms;\n  transition: all 100ms;\n  box-sizing: border-box;\n}\n.altrp-field-select2__value-container {\n  -webkit-align-items: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  -webkit-flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  padding: 2px 8px;\n  -webkit-overflow-scrolling: touch;\n  position: relative;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n.altrp-field-select2__single-value {\n  color: hsl(0,0%,20%);\n  margin-left: 2px;\n  margin-right: 2px;\n  max-width: calc(100% - 8px);\n  overflow: hidden;\n  position: absolute;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  -ms-transform: translateY(-50%);\n  transform: translateY(-50%);\n  box-sizing: border-box;\n}\n.altrp-field-select2__indicators {\n  -webkit-align-items: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-align-self: stretch;\n  -ms-flex-item-align: stretch;\n  align-self: stretch;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-flex-shrink: 0;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  box-sizing: border-box;\n}\n.altrp-field-select2__indicator-separator {\n  -webkit-align-self: stretch;\n  -ms-flex-item-align: stretch;\n  align-self: stretch;\n  background-color: hsl(0,0%,80%);\n  margin-bottom: 8px;\n  margin-top: 8px;\n  width: 1px;\n  box-sizing: border-box;\n}\n.altrp-field-select2__indicator {\n  color: hsl(0,0%,80%);\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 8px;\n  -webkit-transition: color 150ms;\n  transition: color 150ms;\n  box-sizing: border-box;\n  justify-content: center;\n  align-items: center;\n}\n.tba-placeholder {\n  display: flex;\n  justify-content: center;\n  font-size: 28px;\n  font-weight: bold;\n}\n.altrp-field-subgroup {\n  display: flex;\n  flex-wrap: wrap;\n}\n.altrp-field-option {\n  display: flex;\n  padding: 10px;\n}\n.altrp-field-option__label {\n  cursor: pointer;\n}\ntextarea.altrp-field {\n  display: block;\n}\n.altrp-table__filter-select .altrp-field-select2__placeholder {\n  white-space: nowrap;\n}\n.altrp-table__filter-select .altrp-field-select2__single-value {\n  font-size: 14px;\n}\n.altrp-table__filter-select .altrp-field-select2__indicator-separator {\n  display: none;\n}\n.altrp-table__filter-select .altrp-field-select2__indicator {\n  align-items: center;\n}\n.altrp-table__filter-select .altrp-field-select2__control {\n  width: 100%;\n  min-height: 19px;\n  padding: 0;\n  border-radius: 0;\n  outline: none;\n  border-color: rgb(142, 148, 170);\n  -webkit-box-shadow: none;\n  -moz-box-shadow: none;\n  box-shadow: none;\n}\n.altrp-table__filter-select .altrp-field-select2__control input {\n  border: none;\n}\n.altrp-table__filter-select .altrp-field-select2__value-container {\n  padding-top: 0;\n  padding-bottom: 0;\n  line-height: 13px;\n}\n.altrp-field-required {\n  color: red;\n  font-size: 18px;\n  padding-left: 10px;\n}\n.altrp-field-container-label {\n  display: flex;\n  flex-direction: row;\n}\n\n.altrp-field-label-container-left {\n  display: flex;\n  align-items: center;\n}\n\n.altrp-field-label-container {\n  display: inline-flex;\n  align-items: center;\n}\n.altrp-field-select2__indicator.altrp-field-select2__dropdown-indicator {\n  padding: 0 8px;\n  max-height: 14px;\n  overflow: hidden;\n}\n.altrp-field-select2 .altrp-field-select2__value-container {\n  padding: 0px 8px;\n}\n.altrp-field-select2 .css-b8ldur-Input {\n  padding-bottom: 0px;\n  padding-top: 0px;\n  margin: 0 2px;\n}\n.altrp-field-select2 .altrp-field-select2__control {\n  min-height: 14px;\n}\n');var AltrpFieldContainer=styled.div(_templateObject||(_templateObject=(0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_6__.Z)(["\n  ","\n"])),(function(e){switch(e.settings.content_label_position_type){case"left":return"display: flex";case"right":return"display:flex;flex-direction:row-reverse;justify-content:flex-end;"}return""})),InputSelectTreeWidget=function(_Component){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__.Z)(InputSelectTreeWidget,_Component);var _super=_createSuper(InputSelectTreeWidget),_updateOptions,_componentDidUpdate2,_componentDidMount2;function InputSelectTreeWidget(e){var t;(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_8__.Z)(this,InputSelectTreeWidget),(t=_super.call(this,e)).timeInput=null,t.dispatchFieldValueToStore=function(){var e=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark((function e(n){var r,a,l,o,i,s=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]&&s[1],a=t.props.element.getFormId(),-1!==(l=t.props.element.getFieldId()).indexOf("{{")&&(l=replaceContentWithData(l)),!(_.isObject(t.props.appStore)&&l&&a)){e.next=14;break}if(t.props.appStore.dispatch((0,_front_app_src_js_store_forms_data_storage_actions__WEBPACK_IMPORTED_MODULE_10__.Az)(l,n,a,r)),!r){e.next=14;break}if(!(o=t.props.element.getSettings("change_actions"))||isEditor()){e.next=14;break}return e.next=11,Promise.all([__webpack_require__.e(4279),__webpack_require__.e(6593),__webpack_require__.e(2167),__webpack_require__.e(6737)]).then(__webpack_require__.bind(__webpack_require__,2167));case 11:return i=e.sent.default,e.next=14,i.callAllWidgetActions(t.props.element.getIdForAction(),"change",o,t.props.element);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getValue=function(){var e,n=t.props.element.getFormId(),r=t.props.element.getFieldId();return isEditor()?e=t.state.value:(e=_.get(appStore.getState().formsStore,"".concat(n),""),e=_.get(e,r,"")),e},t.renderRightIcon=function(){var e=t.props.element.getResponsiveSetting("right_icon");return _.isEmpty(e)?"caret-down":react__WEBPACK_IMPORTED_MODULE_5__.createElement("span",{className:"bp3-icon bp3-icon_text-widget bp3-icon_right"},renderAsset(e))},t.renderLeftIcon=function(){var e=t.props.element.getResponsiveSetting("left_icon");return _.isEmpty(e)?null:react__WEBPACK_IMPORTED_MODULE_5__.createElement("span",{className:"bp3-icon bp3-icon_text-widget bp3-icon_left"},renderAsset(e))},t.handleNodeClick=function(e,n){var r=t.getOptions();n=n.join(".childNodes.");var a=_.get(r,"".concat(n,".value"));t.dispatchFieldValueToStore(a,!0),t.setState((function(e){return _objectSpread(_objectSpread({},e),{},{isOpen:!1})}))},t.getLabel=function(){var e,n=(null===(e=t.state.flatOptions.find((function(e){return e.value===t.getValue()})))||void 0===e?void 0:e.label)||"";return!t.getValue()&&t.props.element.getResponsiveSetting("content_options_nullable")&&(n=t.props.element.getResponsiveSetting("nulled_option_title")||""),n},t.handleNodeToggle=function(e,n){var r=t.state.options;(0,_helpers_recurse_each__WEBPACK_IMPORTED_MODULE_11__.Z)(r,"childNodes",(function(t){t.value===e.value&&(t.isExpanded=!t.isExpanded)})),t.setState((function(e){return _objectSpread(_objectSpread({},e),{},{options:r})}))},t.onClick=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark((function e(){var n;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.element.getSettings("click_actions",[])||isEditor()){e.next=6;break}return e.next=3,Promise.all([__webpack_require__.e(4279),__webpack_require__.e(6593),__webpack_require__.e(2167),__webpack_require__.e(6737)]).then(__webpack_require__.bind(__webpack_require__,2167));case 3:return n=e.sent.default,e.next=6,n.callAllWidgetActions(t.props.element.getIdForAction(),"click",t.props.element.getSettings("click_actions",[]),t.props.element);case 6:case"end":return e.stop()}}),e)}))),t.handleSearch=function(e){t.setState((function(t){return _objectSpread(_objectSpread({},t),{},{searchValue:e})}))},t.onInteraction=function(e){t.setState((function(t){return _objectSpread(_objectSpread({},t),{},{isOpen:e})}))},e.element.component=(0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__.Z)(t),window.elementDecorator&&window.elementDecorator((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__.Z)(t)),t.defaultValue=t.getContent("content_default_value");var n=[],r=[];return isEditor()&&(n=[{label:"Empty First Level",value:1,id:1,childNodes:[]},{label:"First Level With Child",value:2,id:2,childNodes:[{label:"Empty Second Level",value:3,id:3,childNodes:[]},{label:"Second Level With Child",value:4,id:4,childNodes:[{label:"Empty Third Level",value:5,id:5,childNodes:[]}]}]}],(0,_helpers_recurse_each__WEBPACK_IMPORTED_MODULE_11__.Z)(n,"childNodes",(function(e){r.push(e)}))),t.state={settings:_objectSpread({},e.element.getSettings()),value:t.defaultValue,options:n,isOpen:!1,flatOptions:r,paramsForUpdate:null,searchValue:""},t.popoverProps={usePortal:!0,position:"bottom",minimal:e.element.getResponsiveSetting("minimal"),portalClassName:"altrp-portal altrp-portal_input-select altrp-portal".concat(t.props.element.getId()," ").concat(t.state.widgetDisabled?"pointer-event-none":""),portalContainer:window.EditorFrame?window.EditorFrame.contentWindow.document.body:document.body},isEditor(),t.altrpSelectRef=react__WEBPACK_IMPORTED_MODULE_5__.createRef(),t.getContent("content_default_value")&&t.dispatchFieldValueToStore(t.getContent("content_default_value")),t}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_13__.Z)(InputSelectTreeWidget,[{key:"clearValue",value:function(){this.dispatchFieldValueToStore("",!0)}},{key:"_componentDidMount",value:(_componentDidMount2=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark((function e(t,n){var r,a=this;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state.value,_.get(r,"dynamic")&&this.props.currentModel.getProperty("altrpModelUpdated")&&(r=this.getContent("content_default_value")),!t||t.currentModel.getProperty("altrpModelUpdated")||!this.props.currentModel.getProperty("altrpModelUpdated")){e.next=6;break}return r=this.getContent("content_default_value"),this.setState((function(e){return _objectSpread(_objectSpread({},e),{},{value:r,contentLoaded:!0})}),(function(){a.dispatchFieldValueToStore(r)})),e.abrupt("return");case 6:if(!this.props.currentModel.getProperty("altrpModelUpdated")||!this.props.currentDataStorage.getProperty("currentDataStorageLoaded")||this.state.contentLoaded){e.next=10;break}return r=this.getContent("content_default_value"),this.setState((function(e){return _objectSpread(_objectSpread({},e),{},{value:r,contentLoaded:!0})}),(function(){a.dispatchFieldValueToStore(r)})),e.abrupt("return");case 10:this.state.value!==r&&this.setState((function(e){return _objectSpread(_objectSpread({},e),{},{value:r})}),(function(){a.dispatchFieldValueToStore(r)}));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return _componentDidMount2.apply(this,arguments)})},{key:"getRoute",value:function(){var e=this.props.element.getSettings("model_for_options");return-1===e.indexOf("/")?"/ajax/models/".concat(e,"_options"):(-1!==e.indexOf("{{")&&(e=replaceContentWithData(e)),e)}},{key:"_componentDidUpdate",value:(_componentDidUpdate2=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark((function e(t,n){var r,a=this;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&!t.currentDataStorage.getProperty("currentDataStorageLoaded")&&this.props.currentDataStorage.getProperty("currentDataStorageLoaded")&&(r=this.getContent("content_default_value"),this.setState((function(e){return _objectSpread(_objectSpread({},e),{},{value:r,contentLoaded:!0})}),(function(){a.dispatchFieldValueToStore(r)}))),this.updateOptions(),this.updateValue(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return _componentDidUpdate2.apply(this,arguments)})},{key:"updateValue",value:function updateValue(prevProps){var _this4=this;if(!isEditor()){var content_calculation=this.props.element.getSettings("content_calculation"),altrpforms=this.props.formsStore,fieldName=this.props.element.getFieldId(),formId=this.props.element.getFormId();if(content_calculation){var prevContext={},altrpdata=this.props.currentDataStorage.getData(),altrpmodel=this.props.currentModel.getData(),altrpuser=this.props.currentUser.getData(),altrppagestate=this.props.altrpPageState.getData(),altrpresponses=this.props.altrpresponses.getData(),altrpmeta=this.props.altrpMeta.getData(),context=this.props.element.getCurrentModel().getData();if(-1!==content_calculation.indexOf("altrpdata")&&(context.altrpdata=altrpdata,altrpdata.currentDataStorageLoaded?prevContext.altrpdata=prevProps.currentDataStorage.getData():prevContext.altrpdata=altrpdata),-1!==content_calculation.indexOf("altrpforms")&&(context.altrpforms=altrpforms,"".concat(formId,".").concat(fieldName)===altrpforms.changedField?prevContext.altrpforms=altrpforms:prevContext.altrpforms=prevProps.formsStore),-1!==content_calculation.indexOf("altrpmodel")&&(context.altrpmodel=altrpmodel,prevContext.altrpmodel=prevProps.currentModel.getData()),-1!==content_calculation.indexOf("altrpuser")&&(context.altrpuser=altrpuser,prevContext.altrpuser=prevProps.currentUser.getData()),-1!==content_calculation.indexOf("altrpuser")&&(context.altrpuser=altrpuser,prevContext.altrpuser=prevProps.currentUser.getData()),-1!==content_calculation.indexOf("altrppagestate")&&(context.altrppagestate=altrppagestate,prevContext.altrppagestate=prevProps.altrpPageState.getData()),-1!==content_calculation.indexOf("altrpmeta")&&(context.altrpmeta=altrpmeta,prevContext.altrpmeta=prevProps.altrpMeta.getData()),-1!==content_calculation.indexOf("altrpresponses")&&(context.altrpresponses=altrpresponses,prevContext.altrpresponses=prevProps.altrpresponses.getData()),-1!==content_calculation.indexOf("altrpstorage")&&(context.altrpstorage=getDataFromLocalStorage("altrpstorage",{})),!(_.isEqual(prevProps.currentDataStorage,this.props.currentDataStorage)&&_.isEqual(prevProps.currentUser,this.props.currentUser)&&_.isEqual(prevProps.formsStore,this.props.formsStore)&&_.isEqual(prevProps.altrpPageState,this.props.altrpPageState)&&_.isEqual(prevProps.altrpMeta,this.props.altrpMeta)&&_.isEqual(prevProps.altrpresponses,this.props.altrpresponses)&&_.isEqual(prevProps.currentModel,this.props.currentModel))&&(_.isEqual(prevProps.formsStore,this.props.formsStore)||"".concat(formId,".").concat(fieldName)!==altrpforms.changedField)){var value="";try{if(content_calculation=content_calculation.replace(/}}/g,"')").replace(/{{/g,"_.get(context, '"),value=eval(content_calculation),value===this.state.value)return;this.setState((function(e){return _objectSpread(_objectSpread({},e),{},{value:value})}),(function(){_this4.dispatchFieldValueToStore(value)}))}catch(e){console.error("Evaluate error in Input: '"+e.message+"'",this.props.element.getId())}}}else{var path="".concat(formId,".").concat(fieldName);this.props.formsStore!==prevProps.formsStore&&_.get(altrpforms,path)!==this.state.value&&this.setState((function(e){return _objectSpread(_objectSpread({},e),{},{value:_.get(altrpforms,path)})}))}}}},{key:"updateOptions",value:(_updateOptions=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark((function e(){var t,n;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!isEditor()){e.next=2;break}return e.abrupt("return");case 2:if(t=this.props.element.getResponsiveSetting("content_options")||"",t=getDataByPath(t.replace("{{","").replace("}}","")),_.isArray(t)){e.next=6;break}return e.abrupt("return");case 6:n=[],(0,_helpers_recurse_each__WEBPACK_IMPORTED_MODULE_11__.Z)(t,"childNodes",(function(e){n.push(e)})),_.isEqual(this.state.flatOptions,n)||this.setState((function(e){return _objectSpread(_objectSpread({},e),{},{options:_.cloneDeep(t),flatOptions:_.cloneDeep(n)})}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return _updateOptions.apply(this,arguments)})},{key:"getOptions",value:function(){var e=(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14__.Z)(this.state.options);_.isArray(e)||(e=[]);var t=this.props.element.getDynamicSetting("content_options");if(t&&(e=convertData(t,e)),this.state.searchValue&&(e=(0,match_sorter__WEBPACK_IMPORTED_MODULE_4__.L)(e,this.state.searchValue,{keys:[function(e){return e.label}]})),this.props.element.getResponsiveSetting("content_options_nullable")){var n="";this.props.element.getResponsiveSetting("nulled_option_title")&&(n=this.props.element.getResponsiveSetting("nulled_option_title")),e.unshift({value:"",label:n,id:"",childNodes:[]})}return e.map((function(e){var t,n;return(e=_objectSpread({},e)).hasCaret=!(null===(t=e)||void 0===t||null===(n=t.childNodes)||void 0===n||!n.length),e}))}},{key:"getName",value:function(){return"".concat(this.props.element.getFormId(),"[").concat(this.props.element.getFieldId(),"]")}},{key:"escapeRegExpChars",value:function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}},{key:"forEachNode",value:function(e,t){if(void 0!==e){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;t(a),this.forEachNode(a.childNodes,t)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"render",value:function(){var e,t=this,n=this.props.element,r=this.props.element.getSettings(),a=this.getLabel(),l=r.label_icon,o="",i={},_=this.props.element.getResponsiveSetting("content_label_position_type")||"top";switch(_){case"top":i={marginBottom:this.state.settings.label_style_spacing?this.state.settings.label_style_spacing.size+this.state.settings.label_style_spacing.unit:"2px"},o="";break;case"bottom":i={marginTop:this.state.settings.label_style_spacing?this.state.settings.label_style_spacing.size+this.state.settings.label_style_spacing.unit:"2px"},o="";break;case"left":i={marginRight:this.state.settings.label_style_spacing?this.state.settings.label_style_spacing.size+this.state.settings.label_style_spacing.unit:"2px"},o="altrp-field-label-container-left";break;case"absolute":i={position:"absolute",zIndex:2},o=""}var s=this.getContent("content_label");e=s?react__WEBPACK_IMPORTED_MODULE_5__.createElement("div",{className:"altrp-field-label-container "+o,style:i},react__WEBPACK_IMPORTED_MODULE_5__.createElement("label",{className:"altrp-field-label ".concat(this.state.settings.content_required?"altrp-field-label--required":"")},s),l&&l.assetType&&react__WEBPACK_IMPORTED_MODULE_5__.createElement("span",{className:"altrp-label-icon"},renderAssetIcon(l))):null;var p,c=n.getResponsiveSetting("content_placeholder"),d=n.getResponsiveSetting("content_readonly"),u=(n.getResponsiveSetting("no_results_text"),n.getResponsiveSetting("s_off")),f={placeholder:c},b=n.getResponsiveSetting("position_css_classes","",""),g=this.getContent("position_css_id"),h=isEditor()?document.getElementById("editorContent").contentWindow.document.body:document.body;return p=react__WEBPACK_IMPORTED_MODULE_5__.createElement(Popover,{usePortal:!1,fill:!0,isOpen:this.state.isOpen,onInteraction:this.onInteraction,popoverClassName:"altrp-select-tree_popover altrp-select-tree".concat(this.props.element.getId()),renderTarget:function(e){e.isOpen;var n=e.ref,r=(0,_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_15__.Z)(e,_excluded);return r.className+=" altrp-select-tree-btn",react__WEBPACK_IMPORTED_MODULE_5__.createElement(Button,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_16__.Z)({text:a,fill:!0,disabled:d,elementRef:n,icon:t.renderLeftIcon(),rightIcon:t.renderRightIcon()},r,{onClick:function(e){t.onClick(),r.onClick(e)}}))},portalContainer:h,interactionKind:"click",placement:"bottom",content:react__WEBPACK_IMPORTED_MODULE_5__.createElement("div",{className:"altrp-select-tree"+(b?" ".concat(b):""),id:g},u?"":react__WEBPACK_IMPORTED_MODULE_5__.createElement(InputGroup,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_16__.Z)({leftIcon:"search",placeholder:"Filter...",value:this.state.searchValue,onChange:function(e){return t.handleSearch(e.target.value)}},f)),this.getOptions().length>0?react__WEBPACK_IMPORTED_MODULE_5__.createElement(TreeBlueprint,{contents:this.getOptions(),onNodeClick:this.handleNodeClick,onNodeCollapse:this.handleNodeToggle,onNodeExpand:this.handleNodeToggle}):"")}),react__WEBPACK_IMPORTED_MODULE_5__.createElement(AltrpFieldContainer,{settings:r,className:"altrp-field-container "},"top"===_?e:"","left"===_?e:"","right"===_?e:"","absolute"===_?e:"",p,"bottom"===_?e:"")}}]),InputSelectTreeWidget}(Component);__webpack_exports__.default=InputSelectTreeWidget},74436:function(e,t,n){"use strict";function r(e,t,n){_.isArray(e)&&t&&_.isFunction(n)&&e.forEach((function(e,a){var l=_.get(e,t);_.isArray(l)&&r(l,t,n),n(e,a)}))}n.d(t,{Z:function(){return r}})},48379:function(e,t,n){"use strict";n.d(t,{sc:function(){return r},Yw:function(){return a},Az:function(){return l}});var r="CHANGE_FORM_FIELD_VALUE",a="CHANGE_FORM_FIELD_VALUE";function l(e,t,n,a){return{type:r,fieldName:e,value:t,formId:n,changedField:a?"".concat(n,".").concat(e):null}}}}]);
//# sourceMappingURL=InputSelectTreeWidget.c2fa428416c917ba73ec.bundle.js.map