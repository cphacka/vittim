{"version":3,"sources":["webpack:///./resources/modules/admin/src/components/dashboard/services/getWidgetData.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicPieChart.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/EmptyWidget.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/Spinner.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/d3/TooltipPie.js","webpack:///./resources/modules/editor/src/js/classes/AltrpModel.js","webpack:///./resources/modules/editor/src/js/components/altrp-dashboards/settings/NivoColorSchemes.js","webpack:///./resources/modules/editor/src/js/components/altrp-diagram/AltrpPieDiagram.js","webpack:///./node_modules/d3-path/src/path.js","webpack:///./node_modules/d3-shape/src/constant.js","webpack:///./node_modules/d3-shape/src/line.js","webpack:///./node_modules/d3-shape/src/point.js","webpack:///./node_modules/moment/locale|sync|/^/.*$","webpack:///./node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js"],"names":["queryString","obj","data","Object","keys","reduce","str","key","i","encodeURIComponent","join","console","log","getWidgetData","url","filter","params","JSON","parse","axios","status","regagroScheme","_","find","Schemes","value","colors","milkScheme","milkScheme2","CenteredMetric","dataWithArc","centerX","centerY","total","forEach","datum","x","y","textAnchor","dominantBaseline","className","widget","width","height","dataSource","colorScheme","enableSliceLabels","innerRadius","padAngle","cornerRadius","sortByValue","enableRadialLabels","sort","tickRotation","bottomAxis","keyIsDate","customColorSchemeChecker","customColors","widgetID","useCustomTooltips","margin","title","subTitle","legend","activeOuterRadiusOffset","activeInnerRadiusOffset","useCenteredMetric","useLinkArcLabels","useProcent","undefined","allValue","el","useState","isLoading","setIsLoading","setData","getData","useCallback","length","source","charts","newData","map","item","currentKey","keyFormatted","moment","isValid","format","Number","id","sortBy","useEffect","layers","push","customProperties","arcLinkLabelComponent","style","scheme","tooltip","enable","axisBottom","legends","anchor","direction","translateX","translateY","itemsSpacing","itemWidth","itemHeight","itemDirection","itemOpacity","symbolSize","symbolShape","animate","arcLabelsComponent","label","transform","pointerEvents","Math","round","text","role","TooltipPie","props","state","indexValue","color","settings","prevProps","prevState","isEqual","this","setState","s","padding","display","alignItems","background","marginRight","marginTop","fontSize","borderRadius","boxShadow","whiteSpace","PureComponent","AltrpModel","cloneDeep","clone","isEmpty","name","defaultValue","get","has","set","unset","window","connect","currentDataStorage","useDispatch","widget_name","isCustomColor","customScheme","customTooltip","sql","query","key_is_date","yScaleMax","isMultiple","formatData","r","d","index","tooltipValues","field","isEditor","date","rep","innerData","getDataByPath","path","uniqBy","concat","datasource_path","key_name","data_name","error","datasource_title","legendPosition","qs","keyValues","split","result","replace","parseQueryParams","defaultParams","options","animated","isVertical","size","unit","subtitle","use_legend","legend_anchor","legend_direction","legend_item_direction","legend_translate_x","legend_translate_y","legend_items_spacing","legend_item_width","legend_item_height","legend_item_opacity","legend_symbol_size","legend_symbol_shape","pi","PI","tau","epsilon","tauEpsilon","Path","_x0","_y0","_x1","_y1","prototype","constructor","moveTo","closePath","lineTo","quadraticCurveTo","x1","y1","bezierCurveTo","x2","y2","arcTo","x0","y0","x21","y21","x01","y01","l01_2","Error","abs","x20","y20","l21_2","l20_2","l21","sqrt","l01","l","tan","acos","t01","t21","arc","a0","a1","ccw","dx","cos","dy","sin","cw","da","rect","w","h","toString","defined","context","curve","output","line","buffer","n","defined0","lineStart","lineEnd","point","arguments","p","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","code","resolve","module","exports","componentWillMount","getDerivedStateFromProps","componentWillReceiveProps","nextProps","bind","componentWillUpdate","nextState","__reactInternalSnapshotFlag","__reactInternalSnapshot","getSnapshotBeforeUpdate","polyfill","Component","isReactComponent","foundWillMountName","foundWillReceivePropsName","foundWillUpdateName","UNSAFE_componentWillMount","UNSAFE_componentWillReceiveProps","UNSAFE_componentWillUpdate","componentName","displayName","newApiName","componentDidUpdate","maybeSnapshot","snapshot","call","__suppressDeprecationWarning"],"mappings":"0LAEaA,EAAc,WAAc,IAAbC,EAAa,uDAAP,GAC5BC,EAAOC,OAAOC,KAAKH,GAAKI,QAAO,SAACC,EAAKC,EAAKC,GAK5C,MAAO,CAACF,EAHU,IAANE,EAAU,IAAM,IAC5BD,EAAME,mBAAmBF,GAEI,IADvBE,mBAAmBR,EAAIM,KACUG,KAAK,MAC3C,IAEH,OADAC,QAAQC,IAAI,aAAcV,GACnBA,GAGIW,EAAa,mCAAG,WAAOC,EAAKC,GAAZ,8EACvBC,EAAS,GACS,YAAlB,OAAOD,GACTC,EAAShB,EAAYe,QACM,IAAXA,IAChBC,EAAShB,EAAYiB,KAAKC,MAAMH,KALP,kBAQZI,IAAML,EAAME,EAAQ,IARR,+EAYzBL,QAAQC,IAAR,MAZyB,kBAalB,CAAEQ,OAAQ,MAbQ,yDAAH,yD,uxBCR1B,IAAMC,EAAgBC,EAAEC,KAAKC,IAAS,CAAEC,MAAO,YAAaC,OACtDC,EAAaL,EAAEC,KAAKC,IAAS,CAAEC,MAAO,SAAUC,OAChDE,EAAcN,EAAEC,KAAKC,IAAS,CAAEC,MAAO,UAAWC,OAOlDG,EAAiB,SAAC,GAAsC,IAApCC,EAAoC,EAApCA,YAAaC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QAC1CC,EAAQ,EAKZ,OAJAH,EAAYI,SAAQ,SAAAC,GAChBF,GAASE,EAAMV,SAIjB,2BACE,wBACIW,EAAGL,EACHM,EAAGL,EACHM,WAAW,SACXC,iBAAiB,UACjBC,UAAU,mBAEXP,KA+LT,IAzLwB,SAAC,GA6BnB,IA5BJQ,EA4BI,EA5BJA,OA4BI,IA3BJC,aA2BI,MA3BI,QA2BJ,MA1BJC,cA0BI,MA1BK,QA0BL,MAzBJC,kBAyBI,MAzBS,GAyBT,MAxBJC,mBAwBI,MAxBU,WAwBV,MAvBJC,yBAuBI,aAtBJC,mBAsBI,MAtBU,EAsBV,MArBJC,gBAqBI,MArBO,EAqBP,MApBJC,oBAoBI,MApBW,EAoBX,MAnBJC,mBAmBI,MAnBU,EAmBV,MAlBJC,0BAkBI,aAjBJC,YAiBI,MAjBG,GAiBH,MAhBJC,oBAgBI,MAhBW,EAgBX,MAfJC,kBAeI,aAdJC,iBAcI,aAbJC,gCAaI,aAZJC,oBAYI,MAZW,GAYX,EAXJC,EAWI,EAXJA,SACAC,EAUI,EAVJA,kBACAC,GASI,EATJA,OACAC,GAQI,EARJA,MACAC,GAOI,EAPJA,SACAC,GAMI,EANJA,OACAC,GAKI,EALJA,wBACAC,GAII,EAJJA,wBACAC,GAGI,EAHJA,kBACAC,GAEI,EAFJA,iBACAC,GACI,EADJA,WAEIL,IACF5D,OAAOC,KAAK2D,IAAQ7B,SAAQ,SAAA3B,GAAG,YAAoB8D,IAAhBN,GAAOxD,WAA6BwD,GAAOxD,MAGhF,IAAI+D,GAAW,EAEf1B,EAAWV,SAAQ,SAAAqC,GAAE,OAAID,IAAYC,EAAG9C,SAExC,QAAkC+C,eAAS,GAA3C,iBAAOC,GAAP,MAAkBC,GAAlB,MACA,IAAwBF,cAAS,IAAjC,iBAAOtE,GAAP,MAAayE,GAAb,MAEMC,IAAUC,kBAAW,iBAAC,yFAC1BH,IAAa,GACY,GAArB9B,EAAWkC,OAFW,iCAGHjE,OAAc4B,EAAOsC,OAAQtC,EAAO1B,QAHjC,OAIF,OADhBiE,EAHkB,QAIb5D,SACH6D,EAAUD,EAAO9E,KAAKA,KAAKgF,KAAI,SAAAC,GACnC,IAAMC,EAAaD,EAAK5E,IAClB8E,EAAgBC,IAAOF,GAAYG,UAErCD,IAAOF,GAAYI,OAAO,cAD1BJ,EAGJ,MAAO,CACL3D,MAAOgE,OAAON,EAAKjF,MACnBwF,GAAInC,EAAY8B,EAAeD,MAInCT,GADWM,GACK,IAChBP,IAAa,IAlBS,0BAsBb,OAATtB,GACS,cAATA,QACsB,IAAfR,EAxBe,sBA0BdQ,EA1Bc,OA2Bf,UA3Be,QA8Bf,QA9Be,gCA4BlBR,EAAatB,EAAEqE,OAAO/C,EAAY,CAAC,UA5BjB,oCA+BlBA,EAAatB,EAAEqE,OAAO/C,EAAY,CAAC,OA/BjB,oCAkClBA,EAAaA,EAlCK,6BAsCxB+B,GAAQ/B,GAAc,IACtB8B,IAAa,GAvCW,4CAyCzB,CAACjC,KAEJmD,gBAAU,WACRhB,OACC,CAACA,KAEJ,IAIMiB,GAAS,CAAC,OAAQ,YAAa,gBAAiB,WAElD3B,IACF2B,GAAOC,KAAKjE,GAGd,IAAMkE,GAAmB,GAMzB,OAJK5B,KACH4B,GAAiBC,sBAAwB,kBAAM,+BAG7CvB,GAAkB,gBAAC,IAAD,MAEjBvE,IAAwB,IAAhBA,GAAK4E,OAGhB,gCACGjB,IAAS,sBAAIrB,UAAU,gBAAgByD,MAAO,CAACrC,OAAQ,IAAKC,IAC5DC,IAAY,sBAAItB,UAAU,mBAAmByD,MAAO,CAACrC,OAAQ,IAAKE,IACnE,uBAAKtB,UAAU,UAAUyD,MAAO,CAAEtD,OAAQA,EAAQD,MAAOA,IACvD,gBAAC,MAAD,QACExC,KAAMA,GACNwB,OACE8B,GAA4BC,EAAaqB,OAAS,EAC9CrB,EACgB,YAAhBZ,EACAxB,EACgB,SAAhBwB,EACAlB,EACgB,UAAhBkB,EACAjB,EACA,CAAEsE,OAAQrD,GAEhBsD,QAAS,SAAAhE,GAAK,OACZ,gBAAC,IAAD,CACEiE,OAAQzC,EACRxB,MAAOA,EACPjC,KAAMA,GACNwD,SAAUA,KAGdT,aAAcA,EACdC,YAAaA,EACbmD,WACE/C,GAAc,CACZD,aAAcA,GAGlBO,OAAQA,GACRT,mBAAoBA,EACpBmD,QAASvC,IAAU,CAAC,EAAD,CAEfwC,OAAQ,YACRC,UAAW,SACXC,WAAY,EACZC,WAAY,EACZC,aAAc,EACdC,UAAW,GACXC,WAAY,GACZC,cAAe,gBACfC,YAAa,EACbC,WAAY,GACZC,YAAa,UACVlD,KAGPhB,YAAaA,EACbD,kBAAmBA,EACnBE,SAAUA,EACVkE,SAAS,EACTlD,wBAAyBA,GACzBC,wBAAyBA,GACzB4B,OAAQA,GACRsB,mBAAoB,YAA6B,IAA1BhF,EAA0B,EAA1BA,MAAOiF,EAAmB,EAAnBA,MAAOnB,EAAY,EAAZA,MAEnC,OADAtF,QAAQC,IAAI,CAACuB,UACN,gBAAC,MAAD,CAAYkF,UAAWpB,EAAMoB,UAAWpB,MAAO,CAAEqB,cAAe,SACnE,wBACIhF,WAAW,SACXC,iBAAiB,UACjBC,UAAU,aAET4E,EALL,IAKahD,GAAa,KAAH,OAASmD,KAAKC,MAAOJ,EAAQ9C,GAAY,KAAzC,MAAoD,OAI7EyB,OAxE2B,gBAAC,IAAD,Q,iDCpIzC,IARoB,SAAC,GAAa,IAAX0B,EAAW,EAAXA,KACrB,OACE,uBAAKjF,UAAU,qBACb,uBAAKA,UAAU,2BAA2BiF,GAAc,4B,kDCW9D,IAdgB,WACd,OACE,uBAAKjF,UAAU,qBACb,uBACEA,UAAU,iBACVyD,MAAO,CAAEvD,MAAO,OAAQC,OAAQ,QAChC+E,KAAK,UAEL,wBAAMlF,UAAU,WAAhB,mB,2rBCRFmF,E,wcACJ,WAAYC,GAAO,mCACjB,cAAMA,IAEDC,MAAQ,CACXC,WAAU,UAAEF,EAAMzF,aAAR,aAAE,EAAa2F,WACzBrG,MAAK,UAAEmG,EAAMzF,aAAR,aAAE,EAAaV,MACpBsG,MAAK,UAAEH,EAAMzF,aAAR,aAAE,EAAa4F,MACpB3B,OAAQwB,aAAF,EAAEA,EAAOxB,OACf4B,SAAUJ,aAAF,EAAEA,EAAOI,UARF,E,iDAYnB,SAAmBC,EAAWC,GAAW,WAClC5G,EAAE6G,QAAQF,EAAU7B,OAAQgC,KAAKR,MAAMxB,SAC1CgC,KAAKC,UAAS,SAAAC,GAAC,oBACVA,GADU,IAEblC,OAAM,UAAE,EAAKwB,aAAP,aAAE,EAAYxB,c,oBAK1B,WACyB,YAAvB,OAAIgC,KAAKP,MAAMzB,OAEX,uBACE5D,UAAS,UAAK4F,KAAKR,MAAMlE,SAAhB,2RACTuC,MAAO,CAAEsC,QAAS,YAElB,2BACE,uBACEtC,MAAO,CACL8B,MAAO,QACPS,QAAS,SAGX,uBAAKvC,MAAO,CACVtD,OAAQ,OACR6F,QAAS,OACTC,WAAY,WAEZ,uBAAKxC,MAAO,CACVvD,MAAO,OACPC,OAAQ,OACR+F,WAAYN,KAAKR,MAAMzF,MAAMA,MAAM4F,OAAS,UAC5CY,YAAa,MACbC,UAAW,UAhBjB,UAmBGR,KAAKR,MAAMzF,aAnBd,iBAmBG,EAAkBA,aAnBrB,aAmBG,EAAyBiF,MAnB5B,IAoBE,wCAASgB,KAAKR,MAAMzF,aAApB,iBAAS,EAAkBA,aAA3B,aAAS,EAAyBV,UAO1C,gCACE,uBACEwE,MAAO,CACLyC,WAAY,QACZX,MAAO,UACPc,SAAU,aACVC,aAAc,MACdC,UAAW,kCACXR,QAAS,YAGX,uBACEtC,MAAO,CACL+C,WAAY,MACZR,QAAS,OACTC,WAAY,WAGd,wBACExC,MAAO,CACLuC,QAAS,QACT9F,MAAO,OACPC,OAAQ,OACR+F,WAAYN,KAAKR,MAAMzF,MAAMA,MAAM4F,MACnCY,YAAa,SAGjB,4BACGP,KAAKR,MAAMzF,MAAMA,MAAMiF,MAD1B,IACkC,IAChC,8BAASgB,KAAKR,MAAMzF,MAAMA,MAAMV,e,GAtFrBwH,iBA+FzB,O,mLCrFMC,E,WACJ,aAAuB,IAAXhJ,EAAW,uDAAJ,IAAI,eACrBkI,KAAKlI,KAAOiJ,IAAUjJ,G,sCAQxB,WAAsB,IAAdkJ,IAAc,yDACpB,OAAGA,EACMD,IAAUf,KAAKlI,MAEjBkI,KAAKlI,O,qBAMd,WACE,OAAOmJ,IAAQjB,KAAKlI,Q,yBAQtB,SAAYoJ,GAAyB,IAAnBC,EAAmB,uDAAJ,GAC/B,OAAOC,IAAIpB,KAAKlI,KAAMoJ,EAAMC,K,yBAQ9B,SAAYD,GACV,OAAOG,IAAIrB,KAAKlI,KAAMoJ,K,yBAQxB,SAAYA,GAAkB,IAAZ7H,EAAY,uDAAJ,GAIxB,OAHGA,aAAiByH,IAClBzH,EAAQA,EAAMmD,SAAQ,IAEjB8E,IAAItB,KAAKlI,KAAMoJ,EAAM7H,K,2BAO9B,SAAc6H,GACZ,OAAOK,IAAMvB,KAAKlI,KAAMoJ,O,KAG5BM,OAAOV,WAAaA,EACpB,O,iCCkhBA,IA7lBgB,CACd,CACE9B,MAAO,UACP3F,MAAO,UACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,OACP3F,MAAO,OACPC,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,YAElE,CACE0F,MAAO,aACP3F,MAAO,aACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,SACP3F,MAAO,SACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,QACP3F,MAAO,QACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,SACP3F,MAAO,SACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,UACP3F,MAAO,UACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,UACP3F,MAAO,UACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,OACP3F,MAAO,OACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,OACP3F,MAAO,OACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,OACP3F,MAAO,OACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,kBACP3F,MAAO,kBACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,kBACP3F,MAAO,kBACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,mBACP3F,MAAO,mBACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,gBACP3F,MAAO,gBACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,WACP3F,MAAO,WACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,UACP3F,MAAO,WACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,kBACP3F,MAAO,kBACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,mBACP3F,MAAO,mBACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,WACP3F,MAAO,WACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,QACP3F,MAAO,QACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,SACP3F,MAAO,SACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,QACP3F,MAAO,QACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,UACP3F,MAAO,UACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,UACP3F,MAAO,UACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,OACP3F,MAAO,OACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,aACP3F,MAAO,aACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,cACP3F,MAAO,cACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,aACP3F,MAAO,aACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,aACP3F,MAAO,aACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,oBACP3F,MAAO,oBACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,cACP3F,MAAO,cACPC,OAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE0F,MAAO,aACP3F,MAAO,aACPC,OAAQ,CACN,UACA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","file":"AltrpPieDiagram.70c649dc2418cc193296.bundle.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const queryString = (obj = {}) => {\r\n  let data = Object.keys(obj).reduce((str, key, i) => {\r\n    let delimiter, val;\r\n    delimiter = i === 0 ? \"?\" : \"&\";\r\n    key = encodeURIComponent(key);\r\n    val = encodeURIComponent(obj[key]);\r\n    return [str, delimiter, key, \"=\", val].join(\"\");\r\n  }, \"\");\r\n  console.log(\"RESULT ==>\", data);\r\n  return data;\r\n};\r\n\r\nexport const getWidgetData = async (url, filter) => {\r\n  let params = \"\";\r\n  if (typeof filter === \"object\") {\r\n    params = queryString(filter);\r\n  } else if (typeof filter !== \"undefined\") {\r\n    params = queryString(JSON.parse(filter));\r\n  }\r\n  try {\r\n    return await axios(url + params, {\r\n      // headers: [{ key: \"Cache-Control\", value: \"no-store\" }]\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n    return { status: 500 };\r\n  }\r\n};\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { ResponsivePie } from \"@nivo/pie\";\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport Schemes from \"../../../../../editor/src/js/components/altrp-dashboards/settings/NivoColorSchemes\";\r\nconst regagroScheme = _.find(Schemes, { value: \"regagro\" }).colors;\r\nconst milkScheme = _.find(Schemes, { value: \"milk\" }).colors;\r\nconst milkScheme2 = _.find(Schemes, { value: \"milk2\" }).colors;\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\nimport moment from \"moment\";\r\nimport { animated } from '@react-spring/web'\r\nimport TooltipPie from \"./d3/TooltipPie\";\r\n\r\nconst CenteredMetric = ({ dataWithArc, centerX, centerY }) => {\r\n  let total = 0\r\n  dataWithArc.forEach(datum => {\r\n      total += datum.value\r\n  })\r\n\r\n  return (\r\n    <svg>\r\n      <text\r\n          x={centerX}\r\n          y={centerY}\r\n          textAnchor=\"middle\"\r\n          dominantBaseline=\"central\"\r\n          className='centered-metric'\r\n      >\r\n        {total}\r\n      </text>\r\n    </svg>\r\n  )\r\n}\r\n\r\nconst DynamicPieChart = ({\r\n  widget,\r\n  width = \"300px\",\r\n  height = \"450px\",\r\n  dataSource = [],\r\n  colorScheme = \"red_grey\",\r\n  enableSliceLabels = false,\r\n  innerRadius = 0,\r\n  padAngle = 0,\r\n  cornerRadius = 0,\r\n  sortByValue = 0,\r\n  enableRadialLabels = true,\r\n  sort = \"\",\r\n  tickRotation = 0,\r\n  bottomAxis = true,\r\n  keyIsDate = false,\r\n  customColorSchemeChecker = false,\r\n  customColors = [],\r\n  widgetID,\r\n  useCustomTooltips,\r\n  margin,\r\n  title,\r\n  subTitle,\r\n  legend,\r\n  activeOuterRadiusOffset,\r\n  activeInnerRadiusOffset,\r\n  useCenteredMetric,\r\n  useLinkArcLabels,\r\n  useProcent\r\n}) => {\r\n  if (legend) {\r\n    Object.keys(legend).forEach(key => legend[key] === undefined && delete legend[key])\r\n  }\r\n\r\n  let allValue = 0;\r\n\r\n  dataSource.forEach(el => allValue += el.value)\r\n  \r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    if (dataSource.length == 0) {\r\n      const charts = await getWidgetData(widget.source, widget.filter);\r\n      if (charts.status === 200) {\r\n        const newData = charts.data.data.map(item => {\r\n          const currentKey = item.key;\r\n          const keyFormatted = !moment(currentKey).isValid()\r\n            ? currentKey\r\n            : moment(currentKey).format(\"DD.MM.YYYY\");\r\n\r\n          return {\r\n            value: Number(item.data),\r\n            id: keyIsDate ? keyFormatted : currentKey\r\n          };\r\n        });\r\n        let data = newData;\r\n        setData(data || []);\r\n        setIsLoading(false);\r\n      }\r\n    } else {\r\n      if (\r\n        sort !== null &&\r\n        sort !== \"undefined\" &&\r\n        typeof dataSource !== \"undefined\"\r\n      ) {\r\n        switch (sort) {\r\n          case \"value\":\r\n            dataSource = _.sortBy(dataSource, [\"value\"]);\r\n            break;\r\n          case \"key\":\r\n            dataSource = _.sortBy(dataSource, [\"id\"]);\r\n            break;\r\n          default:\r\n            dataSource = dataSource;\r\n            break;\r\n        }\r\n      }\r\n      setData(dataSource || []);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  const clickHandler = async () => {\r\n\r\n  }\r\n\r\n  const layers = ['arcs', 'arcLabels', 'arcLinkLabels', 'legends']\r\n\r\n  if (useCenteredMetric) {\r\n    layers.push(CenteredMetric)\r\n  }\r\n\r\n  const customProperties = {}\r\n\r\n  if (!useLinkArcLabels) {\r\n    customProperties.arcLinkLabelComponent = () => <text />\r\n  }\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (!data || data.length === 0) return <EmptyWidget />;\r\n\r\n  return (\r\n    <>\r\n      {title && <h3 className='diagram-title' style={{margin: 0}}>{title}</h3>}\r\n      {subTitle && <h5 className='diagram-subtitle' style={{margin: 0}}>{subTitle}</h5>}\r\n      <div className='diagram' style={{ height: height, width: width }}>\r\n        <ResponsivePie\r\n          data={data}\r\n          colors={\r\n            customColorSchemeChecker && customColors.length > 0\r\n              ? customColors\r\n              : colorScheme === \"regagro\"\r\n              ? regagroScheme\r\n              : colorScheme === \"milk\"\r\n              ? milkScheme\r\n              : colorScheme === \"milk2\"\r\n              ? milkScheme2\r\n              : { scheme: colorScheme }\r\n          }\r\n          tooltip={datum => (\r\n            <TooltipPie\r\n              enable={useCustomTooltips}\r\n              datum={datum}\r\n              data={data}\r\n              widgetID={widgetID}\r\n            ></TooltipPie>\r\n          )}\r\n          cornerRadius={cornerRadius}\r\n          sortByValue={sortByValue}\r\n          axisBottom={\r\n            bottomAxis && {\r\n              tickRotation: tickRotation\r\n            }\r\n          }\r\n          margin={margin}\r\n          enableRadialLabels={enableRadialLabels}\r\n          legends={legend && [\r\n            {\r\n              anchor: 'top-right',\r\n              direction: 'column',\r\n              translateX: 0,\r\n              translateY: 0,\r\n              itemsSpacing: 2,\r\n              itemWidth: 60,\r\n              itemHeight: 14,\r\n              itemDirection: \"left-to-right\",\r\n              itemOpacity: 1,\r\n              symbolSize: 14,\r\n              symbolShape: \"circle\",\r\n              ...legend\r\n            }\r\n          ]}\r\n          innerRadius={innerRadius}\r\n          enableSliceLabels={enableSliceLabels}\r\n          padAngle={padAngle}\r\n          animate={true}\r\n          activeOuterRadiusOffset={activeOuterRadiusOffset}\r\n          activeInnerRadiusOffset={activeInnerRadiusOffset}\r\n          layers={layers}\r\n          arcLabelsComponent={({ datum, label, style }) => {\r\n            console.log({datum});\r\n            return <animated.g transform={style.transform} style={{ pointerEvents: 'none' }}>\r\n                <text\r\n                    textAnchor=\"middle\"\r\n                    dominantBaseline=\"central\"\r\n                    className=\"arc-label\"\r\n                >\r\n                    {label} {useProcent ?  ` (${Math.round((label / allValue) * 100)}%)` : ''}\r\n                </text>\r\n            </animated.g>\r\n          }}\r\n          {...customProperties}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicPieChart;\r\n","import React from \"react\";\r\n\r\nconst EmptyWidget = ({ text }) => {\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div className=\"spinner-container__text\">{text ? text : \"Данные обрабатываются\"}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyWidget;\r\n","import React from \"react\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div\r\n        className=\"spinner-border\"\r\n        style={{ width: \"3rem\", height: \"3rem\" }}\r\n        role=\"status\"\r\n      >\r\n        <span className=\"sr-only\">Загрузка...</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import React, { PureComponent } from \"react\";\r\n\r\nclass TooltipPie extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      indexValue: props.datum?.indexValue,\r\n      value: props.datum?.value,\r\n      color: props.datum?.color,\r\n      enable: props?.enable,\r\n      settings: props?.settings\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (!_.isEqual(prevProps.enable, this.props.enable)) {\r\n      this.setState(s => ({\r\n        ...s,\r\n        enable: this.props?.enable\r\n      }));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.enable) {\r\n      return (\r\n        <div\r\n          className={`${this.props.widgetID} altrp-dashboard__tooltip--font altrp-dashboard__tooltip--label-background altrp-dashboard__tooltip--width altrp-dashboard__tooltip--label-background-shadow altrp-dashboard__tooltip--border-type altrp-dashboard__tooltip--border-width altrp-dashboard__tooltip--border-color col-12`}\r\n          style={{ padding: \"5px 9px\" }}\r\n        >\r\n          <div>\r\n            <div\r\n              style={{\r\n                color: 'white',\r\n                display: 'flex'\r\n              }}\r\n            >\r\n              <div style={{\r\n                height: '100%',\r\n                display: 'flex',\r\n                alignItems: 'center'\r\n              }}>\r\n                <div style={{\r\n                  width: '15px',\r\n                  height: '15px',\r\n                  background: this.props.datum.datum.color || \"#000000\",\r\n                  marginRight: '3px',\r\n                  marginTop: '1px'\r\n                }} />\r\n              </div>\r\n              {this.props.datum?.datum?.label}:\r\n              <strong>{this.props.datum?.datum?.value}</strong>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    return (\r\n      <>\r\n        <div\r\n          style={{\r\n            background: \"white\",\r\n            color: \"inherit\",\r\n            fontSize: \"{{SIZE}}px\",\r\n            borderRadius: \"2px\",\r\n            boxShadow: \"rgba(0, 0, 0, 0.25) 0px 1px 2px\",\r\n            padding: \"5px 9px\"\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              whiteSpace: \"pre\",\r\n              display: \"flex\",\r\n              alignItems: \"center\"\r\n            }}\r\n          >\r\n            <span\r\n              style={{\r\n                display: \"block\",\r\n                width: \"12px\",\r\n                height: \"12px\",\r\n                background: this.props.datum.datum.color,\r\n                marginRight: \"7px\"\r\n              }}\r\n            ></span>\r\n            <span>\r\n              {this.props.datum.datum.label}:{\" \"}\r\n              <strong>{this.props.datum.datum.value}</strong>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TooltipPie;\r\n","/**\r\n * Имеет интерфейс для доступы к свойствам data (любой вложенности)\r\n * @class AltrpModel\r\n */\r\nimport cloneDeep from 'lodash.clonedeep';\r\nimport get from 'lodash.get';\r\nimport set from 'lodash.set';\r\nimport has from 'lodash.has';\r\nimport unset from 'lodash.unset';\r\nimport isEmpty from 'lodash.isempty';\r\n// import {cloneDeep, get, set, has, unset, isString, isEmpty} from \"lodash\";\r\n\r\nclass AltrpModel {\r\n  constructor(data = {}) {\r\n    this.data = cloneDeep(data);\r\n  }\r\n\r\n  /**\r\n   * Возваращает объект данных\r\n   * @params {boolean} clone - клонировать или ссылку на данные\r\n   * @return {{}}\r\n   */\r\n  getData(clone = true) {\r\n    if(clone){\r\n      return cloneDeep(this.data);\r\n    }\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * Пустой ли объект\r\n   */\r\n  isEmpty(){\r\n    return isEmpty(this.data);\r\n  }\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {*}\r\n   */\r\n  getProperty(name, defaultValue = '') {\r\n    return get(this.data, name, defaultValue);\r\n  }\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {*}\r\n   */\r\n  hasProperty(name, defaultValue = '') {\r\n    return has(this.data, name);\r\n  }\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {{}}\r\n   */\r\n  setProperty(name, value = '') {\r\n    if(value instanceof AltrpModel){\r\n      value = value.getData(false);\r\n    }\r\n    return set(this.data, name, value);\r\n  }\r\n  /**\r\n   * Удаляет свойства name\r\n   * @params {string} name\r\n   * @return {*}\r\n   */\r\n  unsetProperty(name) {\r\n    return unset(this.data, name);\r\n  }\r\n}\r\nwindow.AltrpModel = AltrpModel;\r\nexport default AltrpModel\r\n","const Schemes = [\r\n  {\r\n    label: \"Regagro\",\r\n    value: \"regagro\",\r\n    colors: [\r\n      \"#FFEC00\",\r\n      \"#6F6E6E\",\r\n      \"#F6E36A\",\r\n      \"#979797\",\r\n      \"#FEF367\",\r\n      \"#979678\",\r\n      \"#CFBF00\",\r\n      \"#706B46\",\r\n      \"#A59103\",\r\n      \"#444444\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"nivo\",\r\n    value: \"nivo\",\r\n    colors: [\"#e8c1a0\", \"#f47560\", \"#f1e15b\", \"#e8a838\", \"#61cdbb\", \"#97e3d5\"]\r\n  },\r\n  {\r\n    label: \"category10\",\r\n    value: \"category10\",\r\n    colors: [\r\n      \"#1f77b4\",\r\n      \"#ff7f0e\",\r\n      \"#2ca02c\",\r\n      \"#d62728\",\r\n      \"#9467bd\",\r\n      \"#8c564b\",\r\n      \"#e377c2\",\r\n      \"#7f7f7f\",\r\n      \"#bcbd22\",\r\n      \"#17becf\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"accent\",\r\n    value: \"accent\",\r\n    colors: [\r\n      \"#7fc97f\",\r\n      \"#beaed4\",\r\n      \"#fdc086\",\r\n      \"#ffff99\",\r\n      \"#386cb0\",\r\n      \"#f0027f\",\r\n      \"#bf5b17\",\r\n      \"#666666\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"dark2\",\r\n    value: \"dark2\",\r\n    colors: [\r\n      \"#1b9e77\",\r\n      \"#d95f02\",\r\n      \"#7570b3\",\r\n      \"#e7298a\",\r\n      \"#66a61e\",\r\n      \"#e6ab02\",\r\n      \"#a6761d\",\r\n      \"#666666\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"paired\",\r\n    value: \"paired\",\r\n    colors: [\r\n      \"#a6cee3\",\r\n      \"#1f78b4\",\r\n      \"#b2df8a\",\r\n      \"#33a02c\",\r\n      \"#fb9a99\",\r\n      \"#e31a1c\",\r\n      \"#fdbf6f\",\r\n      \"#ff7f00\",\r\n      \"#cab2d6\",\r\n      \"#6a3d9a\",\r\n      \"#ffff99\",\r\n      \"#b15928\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"pastel1\",\r\n    value: \"pastel1\",\r\n    colors: [\r\n      \"#fbb4ae\",\r\n      \"#b3cde3\",\r\n      \"#ccebc5\",\r\n      \"#decbe4\",\r\n      \"#fed9a6\",\r\n      \"#ffffcc\",\r\n      \"#e5d8bd\",\r\n      \"#fddaec\",\r\n      \"#f2f2f2\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"pastel2\",\r\n    value: \"pastel2\",\r\n    colors: [\r\n      \"#b3e2cd\",\r\n      \"#fdcdac\",\r\n      \"#cbd5e8\",\r\n      \"#f4cae4\",\r\n      \"#e6f5c9\",\r\n      \"#fff2ae\",\r\n      \"#f1e2cc\",\r\n      \"#cccccc\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"set1\",\r\n    value: \"set1\",\r\n    colors: [\r\n      \"#e41a1c\",\r\n      \"#377eb8\",\r\n      \"#4daf4a\",\r\n      \"#984ea3\",\r\n      \"#ff7f00\",\r\n      \"#ffff33\",\r\n      \"#a65628\",\r\n      \"#f781bf\",\r\n      \"#999999\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"set2\",\r\n    value: \"set2\",\r\n    colors: [\r\n      \"#66c2a5\",\r\n      \"#fc8d62\",\r\n      \"#8da0cb\",\r\n      \"#e78ac3\",\r\n      \"#a6d854\",\r\n      \"#ffd92f\",\r\n      \"#e5c494\",\r\n      \"#b3b3b3\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"set3\",\r\n    value: \"set3\",\r\n    colors: [\r\n      \"#8dd3c7\",\r\n      \"#ffffb3\",\r\n      \"#bebada\",\r\n      \"#fb8072\",\r\n      \"#80b1d3\",\r\n      \"#fdb462\",\r\n      \"#b3de69\",\r\n      \"#fccde5\",\r\n      \"#d9d9d9\",\r\n      \"#bc80bd\",\r\n      \"#ccebc5\",\r\n      \"#ffed6f\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"brown_blueGreen\",\r\n    value: \"brown_blueGreen\",\r\n    colors: [\r\n      \"#543005\",\r\n      \"#8c510a\",\r\n      \"#bf812d\",\r\n      \"#dfc27d\",\r\n      \"#f6e8c3\",\r\n      \"#f5f5f5\",\r\n      \"#c7eae5\",\r\n      \"#80cdc1\",\r\n      \"#35978f\",\r\n      \"#01665e\",\r\n      \"#003c30\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"purpleRed_green\",\r\n    value: \"purpleRed_green\",\r\n    colors: [\r\n      \"#40004b\",\r\n      \"#762a83\",\r\n      \"#9970ab\",\r\n      \"#c2a5cf\",\r\n      \"#e7d4e8\",\r\n      \"#f7f7f7\",\r\n      \"#d9f0d3\",\r\n      \"#a6dba0\",\r\n      \"#5aae61\",\r\n      \"#1b7837\",\r\n      \"#00441b\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"pink_yellowGreen\",\r\n    value: \"pink_yellowGreen\",\r\n    colors: [\r\n      \"#8e0152\",\r\n      \"#c51b7d\",\r\n      \"#de77ae\",\r\n      \"#f1b6da\",\r\n      \"#fde0ef\",\r\n      \"#f7f7f7\",\r\n      \"#e6f5d0\",\r\n      \"#b8e186\",\r\n      \"#7fbc41\",\r\n      \"#4d9221\",\r\n      \"#276419\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"purple_orange\",\r\n    value: \"purple_orange\",\r\n    colors: [\r\n      \"#2d004b\",\r\n      \"#542788\",\r\n      \"#8073ac\",\r\n      \"#b2abd2\",\r\n      \"#d8daeb\",\r\n      \"#f7f7f7\",\r\n      \"#fee0b6\",\r\n      \"#fdb863\",\r\n      \"#e08214\",\r\n      \"#b35806\",\r\n      \"#7f3b08\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"red_blue\",\r\n    value: \"red_blue\",\r\n    colors: [\r\n      \"#67001f\",\r\n      \"#b2182b\",\r\n      \"#d6604d\",\r\n      \"#f4a582\",\r\n      \"#fddbc7\",\r\n      \"#f7f7f7\",\r\n      \"#d1e5f0\",\r\n      \"#92c5de\",\r\n      \"#4393c3\",\r\n      \"#2166ac\",\r\n      \"#053061\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"regagro\",\r\n    value: \"red_grey\",\r\n    colors: [\r\n      \"#67001f\",\r\n      \"#b2182b\",\r\n      \"#d6604d\",\r\n      \"#f4a582\",\r\n      \"#fddbc7\",\r\n      \"#ffffff\",\r\n      \"#e0e0e0\",\r\n      \"#bababa\",\r\n      \"#878787\",\r\n      \"#4d4d4d\",\r\n      \"#1a1a1a\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"red_yellow_blue\",\r\n    value: \"red_yellow_blue\",\r\n    colors: [\r\n      \"#a50026\",\r\n      \"#d73027\",\r\n      \"#f46d43\",\r\n      \"#fdae61\",\r\n      \"#fee090\",\r\n      \"#ffffbf\",\r\n      \"#e0f3f8\",\r\n      \"#abd9e9\",\r\n      \"#74add1\",\r\n      \"#4575b4\",\r\n      \"#313695\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"red_yellow_green\",\r\n    value: \"red_yellow_green\",\r\n    colors: [\r\n      \"#a50026\",\r\n      \"#d73027\",\r\n      \"#f46d43\",\r\n      \"#fdae61\",\r\n      \"#fee08b\",\r\n      \"#ffffbf\",\r\n      \"#d9ef8b\",\r\n      \"#a6d96a\",\r\n      \"#66bd63\",\r\n      \"#1a9850\",\r\n      \"#006837\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"spectral\",\r\n    value: \"spectral\",\r\n    colors: [\r\n      \"#9e0142\",\r\n      \"#d53e4f\",\r\n      \"#f46d43\",\r\n      \"#fdae61\",\r\n      \"#fee08b\",\r\n      \"#ffffbf\",\r\n      \"#e6f598\",\r\n      \"#abdda4\",\r\n      \"#66c2a5\",\r\n      \"#3288bd\",\r\n      \"#5e4fa2\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"blues\",\r\n    value: \"blues\",\r\n    colors: [\r\n      \"#f7fbff\",\r\n      \"#deebf7\",\r\n      \"#c6dbef\",\r\n      \"#9ecae1\",\r\n      \"#6baed6\",\r\n      \"#4292c6\",\r\n      \"#2171b5\",\r\n      \"#08519c\",\r\n      \"#08306b\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"greens\",\r\n    value: \"greens\",\r\n    colors: [\r\n      \"#f7fcf5\",\r\n      \"#e5f5e0\",\r\n      \"#c7e9c0\",\r\n      \"#a1d99b\",\r\n      \"#74c476\",\r\n      \"#41ab5d\",\r\n      \"#238b45\",\r\n      \"#006d2c\",\r\n      \"#00441b\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"greys\",\r\n    value: \"greys\",\r\n    colors: [\r\n      \"#ffffff\",\r\n      \"#f0f0f0\",\r\n      \"#d9d9d9\",\r\n      \"#bdbdbd\",\r\n      \"#969696\",\r\n      \"#737373\",\r\n      \"#525252\",\r\n      \"#252525\",\r\n      \"#000000\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"oranges\",\r\n    value: \"oranges\",\r\n    colors: [\r\n      \"#fff5eb\",\r\n      \"#fee6ce\",\r\n      \"#fdd0a2\",\r\n      \"#fdae6b\",\r\n      \"#fd8d3c\",\r\n      \"#f16913\",\r\n      \"#d94801\",\r\n      \"#a63603\",\r\n      \"#7f2704\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"purples\",\r\n    value: \"purples\",\r\n    colors: [\r\n      \"#fcfbfd\",\r\n      \"#efedf5\",\r\n      \"#dadaeb\",\r\n      \"#bcbddc\",\r\n      \"#9e9ac8\",\r\n      \"#807dba\",\r\n      \"#6a51a3\",\r\n      \"#54278f\",\r\n      \"#3f007d\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"reds\",\r\n    value: \"reds\",\r\n    colors: [\r\n      \"#fff5f0\",\r\n      \"#fee0d2\",\r\n      \"#fcbba1\",\r\n      \"#fc9272\",\r\n      \"#fb6a4a\",\r\n      \"#ef3b2c\",\r\n      \"#cb181d\",\r\n      \"#a50f15\",\r\n      \"#67000d\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"blue_green\",\r\n    value: \"blue_green\",\r\n    colors: [\r\n      \"#f7fcfd\",\r\n      \"#e5f5f9\",\r\n      \"#ccece6\",\r\n      \"#99d8c9\",\r\n      \"#66c2a4\",\r\n      \"#41ae76\",\r\n      \"#238b45\",\r\n      \"#006d2c\",\r\n      \"#00441b\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"blue_purple\",\r\n    value: \"blue_purple\",\r\n    colors: [\r\n      \"#f7fcfd\",\r\n      \"#e0ecf4\",\r\n      \"#bfd3e6\",\r\n      \"#9ebcda\",\r\n      \"#8c96c6\",\r\n      \"#8c6bb1\",\r\n      \"#88419d\",\r\n      \"#810f7c\",\r\n      \"#4d004b\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"green_blue\",\r\n    value: \"green_blue\",\r\n    colors: [\r\n      \"#f7fcf0\",\r\n      \"#e0f3db\",\r\n      \"#ccebc5\",\r\n      \"#a8ddb5\",\r\n      \"#7bccc4\",\r\n      \"#4eb3d3\",\r\n      \"#2b8cbe\",\r\n      \"#0868ac\",\r\n      \"#084081\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"orange_red\",\r\n    value: \"orange_red\",\r\n    colors: [\r\n      \"#fff7ec\",\r\n      \"#fee8c8\",\r\n      \"#fdd49e\",\r\n      \"#fdbb84\",\r\n      \"#fc8d59\",\r\n      \"#ef6548\",\r\n      \"#d7301f\",\r\n      \"#b30000\",\r\n      \"#7f0000\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"purple_blue_green\",\r\n    value: \"purple_blue_green\",\r\n    colors: [\r\n      \"#fff7fb\",\r\n      \"#ece2f0\",\r\n      \"#d0d1e6\",\r\n      \"#a6bddb\",\r\n      \"#67a9cf\",\r\n      \"#3690c0\",\r\n      \"#02818a\",\r\n      \"#016c59\",\r\n      \"#014636\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"purple_blue\",\r\n    value: \"purple_blue\",\r\n    colors: [\r\n      \"#fff7fb\",\r\n      \"#ece7f2\",\r\n      \"#d0d1e6\",\r\n      \"#a6bddb\",\r\n      \"#74a9cf\",\r\n      \"#3690c0\",\r\n      \"#0570b0\",\r\n      \"#045a8d\",\r\n      \"#023858\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"purple_red\",\r\n    value: \"purple_red\",\r\n    colors: [\r\n      \"#f7f4f9\",\r\n      \"#e7e1ef\",\r\n      \"#d4b9da\",\r\n      \"#c994c7\",\r\n      \"#df65b0\",\r\n      \"#e7298a\",\r\n      \"#ce1256\",\r\n      \"#980043\",\r\n      \"#67001f\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"red_purple\",\r\n    value: \"red_purple\",\r\n    colors: [\r\n      \"#fff7f3\",\r\n      \"#fde0dd\",\r\n      \"#fcc5c0\",\r\n      \"#fa9fb5\",\r\n      \"#f768a1\",\r\n      \"#dd3497\",\r\n      \"#ae017e\",\r\n      \"#7a0177\",\r\n      \"#49006a\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"yellow_green_blue\",\r\n    value: \"yellow_green_blue\",\r\n    colors: [\r\n      \"#ffffd9\",\r\n      \"#edf8b1\",\r\n      \"#c7e9b4\",\r\n      \"#7fcdbb\",\r\n      \"#41b6c4\",\r\n      \"#1d91c0\",\r\n      \"#225ea8\",\r\n      \"#253494\",\r\n      \"#081d58\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"yellow_green\",\r\n    value: \"yellow_green\",\r\n    colors: [\r\n      \"#ffffe5\",\r\n      \"#f7fcb9\",\r\n      \"#d9f0a3\",\r\n      \"#addd8e\",\r\n      \"#78c679\",\r\n      \"#41ab5d\",\r\n      \"#238443\",\r\n      \"#006837\",\r\n      \"#004529\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"yellow_orange_brown\",\r\n    value: \"yellow_orange_brown\",\r\n    colors: [\r\n      \"#ffffe5\",\r\n      \"#fff7bc\",\r\n      \"#fee391\",\r\n      \"#fec44f\",\r\n      \"#fe9929\",\r\n      \"#ec7014\",\r\n      \"#cc4c02\",\r\n      \"#993404\",\r\n      \"#662506\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"yellow_orange_red\",\r\n    value: \"yellow_orange_red\",\r\n    colors: [\r\n      \"#ffffcc\",\r\n      \"#ffeda0\",\r\n      \"#fed976\",\r\n      \"#feb24c\",\r\n      \"#fd8d3c\",\r\n      \"#fc4e2a\",\r\n      \"#e31a1c\",\r\n      \"#bd0026\",\r\n      \"#800026\"\r\n    ]\r\n  },\r\n   {\r\n    label: \"Milk\",\r\n    value: \"milk\",\r\n    colors: [\r\n      \"#797979\", \r\n      \"#042D5B\", \r\n      \"#536DFE\", \r\n      \"#7C4DFF\", \r\n      \"#AA8D52\", \r\n      \"#448AFF\", \r\n      \"#A52A2A\", \r\n      \"#FF6347\", \r\n      \"#EE82EE\", \r\n      \"#BDB76B\"\r\n    ]\r\n  },\r\n  {\r\n    label: \"Milk2\",\r\n    value: \"milk2\",\r\n    colors: [\"#004B9C\", \"#6F2700\", \"#FF6600\", \"#005800\"]\r\n  }\r\n];\r\nexport default Schemes;\r\n","import React, { useEffect } from \"react\";\r\nimport { changePageState } from \"../../../../../front-app/src/js/store/altrp-page-state-storage/actions\";\r\nimport { connect, useDispatch } from \"react-redux\";\r\n\r\nimport DynamicPieChart from \"../../../../../admin/src/components/dashboard/widgets/DynamicPieChart\";\r\n\r\nimport Schemes from \"../../../../../editor/src/js/components/altrp-dashboards/settings/NivoColorSchemes\";\r\n\r\nimport { getDataByPath, isEditor } from \"../../../../../front-app/src/js/helpers\";\r\nimport moment from \"moment\";\r\n\r\nconst AltrpPieDiagram = props => {\r\n  const { settings, id } = props;\r\n\r\n  const dispatch = useDispatch();\r\n  const widgetName = settings?.widget_name || id;\r\n  const customColorSchemeChecker = settings?.isCustomColor;\r\n\r\n  const customColors = settings?.customScheme?.map(item =>\r\n    _.get(item, \"color.colorPickedHex\")\r\n  );\r\n\r\n  const useCustomTooltips = settings?.customTooltip;\r\n\r\n  const sql = settings.query?.dataSource?.value;\r\n  const keyIsDate = settings.key_is_date;\r\n  //line settings\r\n\r\n  const {\r\n    activeOuterRadiusOffset,\r\n    margin,\r\n    yScaleMax,\r\n    colorScheme,\r\n    isMultiple,\r\n    isCustomColor,\r\n    sort,\r\n    tickRotation,\r\n    bottomAxis,\r\n    innerRadius,\r\n    enableSliceLabels,\r\n    padAngle,\r\n    cornerRadius,\r\n    sortByValue,\r\n    enableRadialLabels,\r\n    activeInnerRadiusOffset,\r\n    useCenteredMetric,\r\n    useLinkArcLabels,\r\n    useProcent\r\n  } = settings\r\n  \r\n  //data variable\r\n  let data = [];\r\n\r\n  //funciton for formattion data for all types\r\n  const formatData = (data, r) => {\r\n    return data.map((d, index) => {\r\n      const currentKey = _.get(d, r.key);\r\n      const keyFormatted = !moment(currentKey).isValid()\r\n        ? currentKey\r\n        : moment(currentKey).format(\"DD.MM.YYYY\");\r\n      const tooltip =\r\n        typeof tooltipValues !== \"undefined\"\r\n          ? tooltipValues?.map(item => {\r\n              return {\r\n                label: item?.label,\r\n                value: _.get(d, item.field),\r\n                color: item?.color\r\n              };\r\n            })\r\n          : [];\r\n        \r\n        return {\r\n            value: Number(_.get(d, r.data)),\r\n            id: keyIsDate ? keyFormatted : currentKey,\r\n            tooltip: tooltip\r\n        };\r\n    });\r\n  };\r\n\r\n  if (isEditor()) {\r\n    data = [\r\n      {\r\n        id: 'Demo data 1',\r\n        value: 60,\r\n        tooltip: []\r\n      },\r\n      {\r\n        id: 'Demo data 2',\r\n        date: '2013-01',\r\n        value: 200,\r\n        tooltip: []\r\n      },\r\n      {\r\n        id: 'Demo data 3',\r\n        date: '2013-01',\r\n        value: 20,\r\n        tooltip: []\r\n      },\r\n      {\r\n        id: 'Demo data 4',\r\n        date: '2013-01',\r\n        value: 10,\r\n        tooltip: []\r\n      },\r\n      {\r\n        id: 'Demo data 5',\r\n        date: '2013-01',\r\n        value: 50,\r\n        tooltip: []\r\n      },\r\n    ]\r\n  } else {\r\n    if (isMultiple) {\r\n      let repeater = _.cloneDeep(settings.rep, []);\r\n      data = repeater.map((r, index) => {\r\n        let innerData = getDataByPath(r.path, []);\r\n        if (innerData.length > 0) {\r\n          //Исключаем дублирование ключей, т.к. это приводит к ошибкам рендера всех диаграм\r\n          innerData = _.uniqBy(innerData, r.key);\r\n          \r\n          innerData = formatData(innerData, r);\r\n        }\r\n        \r\n        return innerData;\r\n      });\r\n      \r\n      data = [].concat(...data);\r\n\r\n    } else if (settings.datasource_path != null) {\r\n      try {\r\n        data = getDataByPath(settings.datasource_path, []);\r\n        const r = {\r\n          key: settings.key_name,\r\n          data: settings.data_name\r\n        };\r\n  \r\n        data = formatData(data, r);\r\n      } catch (error) {\r\n        console.log(\"====================================\");\r\n        console.error(error);\r\n        console.log(\"====================================\");\r\n        data = [\r\n          {\r\n            id: settings.datasource_title || settings.datasource_path,\r\n            data: []\r\n          }\r\n        ];\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!sql && data.length === 0) {\r\n    return (\r\n      <div className={`altrp-chart ${settings.legendPosition}`}>\r\n        Идет загрузка данных...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const parseQueryParams = (qs = \"\") => {\r\n    if (!qs) return \"\";\r\n    const keyValues = qs.split(\"\\n\");\r\n    const result = keyValues.map(item => item.replace(\"|\", \"=\")).join(\"&\");\r\n    return `?${result}`;\r\n  };\r\n\r\n  const queryString = parseQueryParams(settings.query?.defaultParams);\r\n\r\n  const widget = {\r\n    source: sql + queryString,\r\n    options: {\r\n      colorScheme: settings.colorScheme,\r\n      legend: settings.legend,\r\n      animated: settings.animated,\r\n      isVertical: settings.isVertical\r\n    },\r\n    filter: {}\r\n  };\r\n\r\n  console.log(\"====================================\");\r\n  console.log(data);\r\n  console.log(\"====================================\");\r\n\r\n  return (\r\n    <DynamicPieChart\r\n      useProcent={useProcent}\r\n      widgetID={id}\r\n      margin={margin}\r\n      useCustomTooltips={useCustomTooltips}\r\n      yScaleMax={yScaleMax}\r\n      customColorSchemeChecker={customColorSchemeChecker}\r\n      customColors={customColors}\r\n      isMultiple={isMultiple}\r\n      dataSource={data}\r\n      colorScheme={colorScheme}\r\n      widget={widget}\r\n      width={`${settings.width?.size}${settings.width?.unit}`}\r\n      height={`${settings.height?.size}${settings.height?.unit}`}\r\n      innerRadius={innerRadius}\r\n      enableSliceLabels={enableSliceLabels}\r\n      padAngle={padAngle}\r\n      cornerRadius={cornerRadius}\r\n      sortByValue={sortByValue}\r\n      enableRadialLabels={enableRadialLabels}\r\n      sort={sort}\r\n      tickRotation={tickRotation}\r\n      bottomAxis={bottomAxis}\r\n      title={settings.datasource_title}\r\n      subTitle={settings.subtitle}\r\n      legend={settings.use_legend && {\r\n        anchor: settings.legend_anchor,\r\n        direction: settings.legend_direction,\r\n        itemDirection: settings.legend_item_direction,\r\n        translateX: settings.legend_translate_x,\r\n        translateY: settings.legend_translate_y,\r\n        itemsSpacing: settings.legend_items_spacing,\r\n        itemWidth: settings.legend_item_width,\r\n        itemHeight: settings.legend_item_height,\r\n        itemOpacity: settings.legend_item_opacity,\r\n        symbolSize: settings.legend_symbol_size,\r\n        symbolShape: settings.legend_symbol_shape\r\n      }}\r\n      keyIsDate={keyIsDate}\r\n      activeOuterRadiusOffset={activeOuterRadiusOffset}\r\n      activeInnerRadiusOffset={activeInnerRadiusOffset}\r\n      useCenteredMetric={useCenteredMetric}\r\n      useLinkArcLabels={useLinkArcLabels}\r\n    />\r\n  );\r\n};\r\nconst mapStateToProps = state => ({\r\n  currentDataStorage: state.currentDataStorage\r\n});\r\nexport default connect(mapStateToProps)(AltrpPieDiagram);","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","var map = {\n\t\"./af\": 42786,\n\t\"./af.js\": 42786,\n\t\"./ar\": 30867,\n\t\"./ar-dz\": 14130,\n\t\"./ar-dz.js\": 14130,\n\t\"./ar-kw\": 96135,\n\t\"./ar-kw.js\": 96135,\n\t\"./ar-ly\": 56440,\n\t\"./ar-ly.js\": 56440,\n\t\"./ar-ma\": 47702,\n\t\"./ar-ma.js\": 47702,\n\t\"./ar-sa\": 16040,\n\t\"./ar-sa.js\": 16040,\n\t\"./ar-tn\": 37100,\n\t\"./ar-tn.js\": 37100,\n\t\"./ar.js\": 30867,\n\t\"./az\": 31083,\n\t\"./az.js\": 31083,\n\t\"./be\": 9808,\n\t\"./be.js\": 9808,\n\t\"./bg\": 68338,\n\t\"./bg.js\": 68338,\n\t\"./bm\": 67438,\n\t\"./bm.js\": 67438,\n\t\"./bn\": 8905,\n\t\"./bn-bd\": 76225,\n\t\"./bn-bd.js\": 76225,\n\t\"./bn.js\": 8905,\n\t\"./bo\": 11560,\n\t\"./bo.js\": 11560,\n\t\"./br\": 1278,\n\t\"./br.js\": 1278,\n\t\"./bs\": 80622,\n\t\"./bs.js\": 80622,\n\t\"./ca\": 2468,\n\t\"./ca.js\": 2468,\n\t\"./cs\": 5822,\n\t\"./cs.js\": 5822,\n\t\"./cv\": 50877,\n\t\"./cv.js\": 50877,\n\t\"./cy\": 47373,\n\t\"./cy.js\": 47373,\n\t\"./da\": 24780,\n\t\"./da.js\": 24780,\n\t\"./de\": 59740,\n\t\"./de-at\": 60217,\n\t\"./de-at.js\": 60217,\n\t\"./de-ch\": 60894,\n\t\"./de-ch.js\": 60894,\n\t\"./de.js\": 59740,\n\t\"./dv\": 5300,\n\t\"./dv.js\": 5300,\n\t\"./el\": 50837,\n\t\"./el.js\": 50837,\n\t\"./en-au\": 78348,\n\t\"./en-au.js\": 78348,\n\t\"./en-ca\": 77925,\n\t\"./en-ca.js\": 77925,\n\t\"./en-gb\": 22243,\n\t\"./en-gb.js\": 22243,\n\t\"./en-ie\": 46436,\n\t\"./en-ie.js\": 46436,\n\t\"./en-il\": 47207,\n\t\"./en-il.js\": 47207,\n\t\"./en-in\": 44175,\n\t\"./en-in.js\": 44175,\n\t\"./en-nz\": 76319,\n\t\"./en-nz.js\": 76319,\n\t\"./en-sg\": 31662,\n\t\"./en-sg.js\": 31662,\n\t\"./eo\": 92915,\n\t\"./eo.js\": 92915,\n\t\"./es\": 55655,\n\t\"./es-do\": 55251,\n\t\"./es-do.js\": 55251,\n\t\"./es-mx\": 96112,\n\t\"./es-mx.js\": 96112,\n\t\"./es-us\": 71146,\n\t\"./es-us.js\": 71146,\n\t\"./es.js\": 55655,\n\t\"./et\": 5603,\n\t\"./et.js\": 5603,\n\t\"./eu\": 77763,\n\t\"./eu.js\": 77763,\n\t\"./fa\": 76959,\n\t\"./fa.js\": 76959,\n\t\"./fi\": 11897,\n\t\"./fi.js\": 11897,\n\t\"./fil\": 42549,\n\t\"./fil.js\": 42549,\n\t\"./fo\": 94694,\n\t\"./fo.js\": 94694,\n\t\"./fr\": 94470,\n\t\"./fr-ca\": 63049,\n\t\"./fr-ca.js\": 63049,\n\t\"./fr-ch\": 52330,\n\t\"./fr-ch.js\": 52330,\n\t\"./fr.js\": 94470,\n\t\"./fy\": 5044,\n\t\"./fy.js\": 5044,\n\t\"./ga\": 29295,\n\t\"./ga.js\": 29295,\n\t\"./gd\": 2101,\n\t\"./gd.js\": 2101,\n\t\"./gl\": 38794,\n\t\"./gl.js\": 38794,\n\t\"./gom-deva\": 27884,\n\t\"./gom-deva.js\": 27884,\n\t\"./gom-latn\": 23168,\n\t\"./gom-latn.js\": 23168,\n\t\"./gu\": 95349,\n\t\"./gu.js\": 95349,\n\t\"./he\": 24206,\n\t\"./he.js\": 24206,\n\t\"./hi\": 30094,\n\t\"./hi.js\": 30094,\n\t\"./hr\": 30316,\n\t\"./hr.js\": 30316,\n\t\"./hu\": 22138,\n\t\"./hu.js\": 22138,\n\t\"./hy-am\": 11423,\n\t\"./hy-am.js\": 11423,\n\t\"./id\": 29218,\n\t\"./id.js\": 29218,\n\t\"./is\": 90135,\n\t\"./is.js\": 90135,\n\t\"./it\": 90626,\n\t\"./it-ch\": 10150,\n\t\"./it-ch.js\": 10150,\n\t\"./it.js\": 90626,\n\t\"./ja\": 39183,\n\t\"./ja.js\": 39183,\n\t\"./jv\": 24286,\n\t\"./jv.js\": 24286,\n\t\"./ka\": 12105,\n\t\"./ka.js\": 12105,\n\t\"./kk\": 47772,\n\t\"./kk.js\": 47772,\n\t\"./km\": 18758,\n\t\"./km.js\": 18758,\n\t\"./kn\": 79282,\n\t\"./kn.js\": 79282,\n\t\"./ko\": 33730,\n\t\"./ko.js\": 33730,\n\t\"./ku\": 1408,\n\t\"./ku.js\": 1408,\n\t\"./ky\": 33291,\n\t\"./ky.js\": 33291,\n\t\"./lb\": 36841,\n\t\"./lb.js\": 36841,\n\t\"./lo\": 55466,\n\t\"./lo.js\": 55466,\n\t\"./lt\": 57010,\n\t\"./lt.js\": 57010,\n\t\"./lv\": 37595,\n\t\"./lv.js\": 37595,\n\t\"./me\": 39861,\n\t\"./me.js\": 39861,\n\t\"./mi\": 35493,\n\t\"./mi.js\": 35493,\n\t\"./mk\": 95966,\n\t\"./mk.js\": 95966,\n\t\"./ml\": 87341,\n\t\"./ml.js\": 87341,\n\t\"./mn\": 5115,\n\t\"./mn.js\": 5115,\n\t\"./mr\": 10370,\n\t\"./mr.js\": 10370,\n\t\"./ms\": 9847,\n\t\"./ms-my\": 41237,\n\t\"./ms-my.js\": 41237,\n\t\"./ms.js\": 9847,\n\t\"./mt\": 72126,\n\t\"./mt.js\": 72126,\n\t\"./my\": 56165,\n\t\"./my.js\": 56165,\n\t\"./nb\": 64924,\n\t\"./nb.js\": 64924,\n\t\"./ne\": 16744,\n\t\"./ne.js\": 16744,\n\t\"./nl\": 93901,\n\t\"./nl-be\": 59814,\n\t\"./nl-be.js\": 59814,\n\t\"./nl.js\": 93901,\n\t\"./nn\": 83877,\n\t\"./nn.js\": 83877,\n\t\"./oc-lnc\": 92135,\n\t\"./oc-lnc.js\": 92135,\n\t\"./pa-in\": 15858,\n\t\"./pa-in.js\": 15858,\n\t\"./pl\": 64495,\n\t\"./pl.js\": 64495,\n\t\"./pt\": 89520,\n\t\"./pt-br\": 57971,\n\t\"./pt-br.js\": 57971,\n\t\"./pt.js\": 89520,\n\t\"./ro\": 96459,\n\t\"./ro.js\": 96459,\n\t\"./ru\": 21793,\n\t\"./ru.js\": 21793,\n\t\"./sd\": 40950,\n\t\"./sd.js\": 40950,\n\t\"./se\": 10490,\n\t\"./se.js\": 10490,\n\t\"./si\": 90124,\n\t\"./si.js\": 90124,\n\t\"./sk\": 64249,\n\t\"./sk.js\": 64249,\n\t\"./sl\": 14985,\n\t\"./sl.js\": 14985,\n\t\"./sq\": 51104,\n\t\"./sq.js\": 51104,\n\t\"./sr\": 49131,\n\t\"./sr-cyrl\": 79915,\n\t\"./sr-cyrl.js\": 79915,\n\t\"./sr.js\": 49131,\n\t\"./ss\": 95606,\n\t\"./ss.js\": 95606,\n\t\"./sv\": 98760,\n\t\"./sv.js\": 98760,\n\t\"./sw\": 91172,\n\t\"./sw.js\": 91172,\n\t\"./ta\": 27333,\n\t\"./ta.js\": 27333,\n\t\"./te\": 23110,\n\t\"./te.js\": 23110,\n\t\"./tet\": 52095,\n\t\"./tet.js\": 52095,\n\t\"./tg\": 27321,\n\t\"./tg.js\": 27321,\n\t\"./th\": 9041,\n\t\"./th.js\": 9041,\n\t\"./tk\": 19005,\n\t\"./tk.js\": 19005,\n\t\"./tl-ph\": 75768,\n\t\"./tl-ph.js\": 75768,\n\t\"./tlh\": 89444,\n\t\"./tlh.js\": 89444,\n\t\"./tr\": 72397,\n\t\"./tr.js\": 72397,\n\t\"./tzl\": 28254,\n\t\"./tzl.js\": 28254,\n\t\"./tzm\": 51106,\n\t\"./tzm-latn\": 30699,\n\t\"./tzm-latn.js\": 30699,\n\t\"./tzm.js\": 51106,\n\t\"./ug-cn\": 9288,\n\t\"./ug-cn.js\": 9288,\n\t\"./uk\": 67691,\n\t\"./uk.js\": 67691,\n\t\"./ur\": 13795,\n\t\"./ur.js\": 13795,\n\t\"./uz\": 6791,\n\t\"./uz-latn\": 60588,\n\t\"./uz-latn.js\": 60588,\n\t\"./uz.js\": 6791,\n\t\"./vi\": 65666,\n\t\"./vi.js\": 65666,\n\t\"./x-pseudo\": 14378,\n\t\"./x-pseudo.js\": 14378,\n\t\"./yo\": 75805,\n\t\"./yo.js\": 75805,\n\t\"./zh-cn\": 83839,\n\t\"./zh-cn.js\": 83839,\n\t\"./zh-hk\": 55726,\n\t\"./zh-hk.js\": 55726,\n\t\"./zh-mo\": 99807,\n\t\"./zh-mo.js\": 99807,\n\t\"./zh-tw\": 74152,\n\t\"./zh-tw.js\": 74152\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction componentWillMount() {\n  // Call this.constructor.gDSFP to support sub-classes.\n  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);\n  if (state !== null && state !== undefined) {\n    this.setState(state);\n  }\n}\n\nfunction componentWillReceiveProps(nextProps) {\n  // Call this.constructor.gDSFP to support sub-classes.\n  // Use the setState() updater to ensure state isn't stale in certain edge cases.\n  function updater(prevState) {\n    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);\n    return state !== null && state !== undefined ? state : null;\n  }\n  // Binding \"this\" is important for shallow renderer support.\n  this.setState(updater.bind(this));\n}\n\nfunction componentWillUpdate(nextProps, nextState) {\n  try {\n    var prevProps = this.props;\n    var prevState = this.state;\n    this.props = nextProps;\n    this.state = nextState;\n    this.__reactInternalSnapshotFlag = true;\n    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(\n      prevProps,\n      prevState\n    );\n  } finally {\n    this.props = prevProps;\n    this.state = prevState;\n  }\n}\n\n// React may warn about cWM/cWRP/cWU methods being deprecated.\n// Add a flag to suppress these warnings for this special case.\ncomponentWillMount.__suppressDeprecationWarning = true;\ncomponentWillReceiveProps.__suppressDeprecationWarning = true;\ncomponentWillUpdate.__suppressDeprecationWarning = true;\n\nfunction polyfill(Component) {\n  var prototype = Component.prototype;\n\n  if (!prototype || !prototype.isReactComponent) {\n    throw new Error('Can only polyfill class components');\n  }\n\n  if (\n    typeof Component.getDerivedStateFromProps !== 'function' &&\n    typeof prototype.getSnapshotBeforeUpdate !== 'function'\n  ) {\n    return Component;\n  }\n\n  // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n  // Error if any of these lifecycles are present,\n  // Because they would work differently between older and newer (16.3+) versions of React.\n  var foundWillMountName = null;\n  var foundWillReceivePropsName = null;\n  var foundWillUpdateName = null;\n  if (typeof prototype.componentWillMount === 'function') {\n    foundWillMountName = 'componentWillMount';\n  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {\n    foundWillMountName = 'UNSAFE_componentWillMount';\n  }\n  if (typeof prototype.componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'componentWillReceiveProps';\n  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n  }\n  if (typeof prototype.componentWillUpdate === 'function') {\n    foundWillUpdateName = 'componentWillUpdate';\n  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {\n    foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n  }\n  if (\n    foundWillMountName !== null ||\n    foundWillReceivePropsName !== null ||\n    foundWillUpdateName !== null\n  ) {\n    var componentName = Component.displayName || Component.name;\n    var newApiName =\n      typeof Component.getDerivedStateFromProps === 'function'\n        ? 'getDerivedStateFromProps()'\n        : 'getSnapshotBeforeUpdate()';\n\n    throw Error(\n      'Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' +\n        componentName +\n        ' uses ' +\n        newApiName +\n        ' but also contains the following legacy lifecycles:' +\n        (foundWillMountName !== null ? '\\n  ' + foundWillMountName : '') +\n        (foundWillReceivePropsName !== null\n          ? '\\n  ' + foundWillReceivePropsName\n          : '') +\n        (foundWillUpdateName !== null ? '\\n  ' + foundWillUpdateName : '') +\n        '\\n\\nThe above lifecycles should be removed. Learn more about this warning here:\\n' +\n        'https://fb.me/react-async-component-lifecycle-hooks'\n    );\n  }\n\n  // React <= 16.2 does not support static getDerivedStateFromProps.\n  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.\n  // Newer versions of React will ignore these lifecycles if gDSFP exists.\n  if (typeof Component.getDerivedStateFromProps === 'function') {\n    prototype.componentWillMount = componentWillMount;\n    prototype.componentWillReceiveProps = componentWillReceiveProps;\n  }\n\n  // React <= 16.2 does not support getSnapshotBeforeUpdate.\n  // As a workaround, use cWU to invoke the new lifecycle.\n  // Newer versions of React will ignore that lifecycle if gSBU exists.\n  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {\n    if (typeof prototype.componentDidUpdate !== 'function') {\n      throw new Error(\n        'Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype'\n      );\n    }\n\n    prototype.componentWillUpdate = componentWillUpdate;\n\n    var componentDidUpdate = prototype.componentDidUpdate;\n\n    prototype.componentDidUpdate = function componentDidUpdatePolyfill(\n      prevProps,\n      prevState,\n      maybeSnapshot\n    ) {\n      // 16.3+ will not execute our will-update method;\n      // It will pass a snapshot value to did-update though.\n      // Older versions will require our polyfilled will-update value.\n      // We need to handle both cases, but can't just check for the presence of \"maybeSnapshot\",\n      // Because for <= 15.x versions this might be a \"prevContext\" object.\n      // We also can't just check \"__reactInternalSnapshot\",\n      // Because get-snapshot might return a falsy value.\n      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.\n      var snapshot = this.__reactInternalSnapshotFlag\n        ? this.__reactInternalSnapshot\n        : maybeSnapshot;\n\n      componentDidUpdate.call(this, prevProps, prevState, snapshot);\n    };\n  }\n\n  return Component;\n}\n\nexport { polyfill };\n"],"sourceRoot":""}