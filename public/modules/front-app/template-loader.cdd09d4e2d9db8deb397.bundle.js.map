{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./resources/modules/editor/src/js/classes/AltrpModel.js","webpack:///./resources/modules/editor/src/js/components/template-loader/TemplateLoader.js","webpack:///./resources/modules/front-app/src/js/libs/template-loader.js"],"names":["_assertThisInitialized","self","ReferenceError","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","constructor","_possibleConstructorReturn","call","_setPrototypeOf","p","_typeof","Symbol","iterator","AltrpModel","data","this","cloneDeep","clone","isEmpty","name","defaultValue","get","has","getData","set","unset","window","state","templateComponent","templateLoader","default","frontElementsFabric","ElementWrapper","setState","loadTemplate","templateId","loadParsedTemplate","cloneElement","cardModel","setCardModel","React","createElement","componentClass","children","element","_","isFunction","onLoad","prevProps","prevState","className","Component","altrpHelpers","TemplateLoader"],"mappings":"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","file":"template-loader.cdd09d4e2d9db8deb397.bundle.js","sourcesContent":["export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","/**\r\n * Имеет интерфейс для доступы к свойствам data (любой вложенности)\r\n * @class AltrpModel\r\n */\r\nimport cloneDeep from 'lodash.clonedeep';\r\nimport get from 'lodash.get';\r\nimport set from 'lodash.set';\r\nimport has from 'lodash.has';\r\nimport unset from 'lodash.unset';\r\nimport isEmpty from 'lodash.isempty';\r\n// import {cloneDeep, get, set, has, unset, isString, isEmpty} from \"lodash\";\r\n\r\nclass AltrpModel {\r\n  constructor(data = {}) {\r\n    this.data = cloneDeep(data);\r\n  }\r\n\r\n  /**\r\n   * Возваращает объект данных\r\n   * @params {boolean} clone - клонировать или ссылку на данные\r\n   * @return {{}}\r\n   */\r\n  getData(clone = true) {\r\n    if(clone){\r\n      return cloneDeep(this.data);\r\n    }\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * Пустой ли объект\r\n   */\r\n  isEmpty(){\r\n    return isEmpty(this.data);\r\n  }\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {*}\r\n   */\r\n  getProperty(name, defaultValue = '') {\r\n    return get(this.data, name, defaultValue);\r\n  }\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {*}\r\n   */\r\n  hasProperty(name, defaultValue = '') {\r\n    return has(this.data, name);\r\n  }\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {{}}\r\n   */\r\n  setProperty(name, value = '') {\r\n    if(value instanceof AltrpModel){\r\n      value = value.getData(false);\r\n    }\r\n    return set(this.data, name, value);\r\n  }\r\n  /**\r\n   * Удаляет свойства name\r\n   * @params {string} name\r\n   * @return {*}\r\n   */\r\n  unsetProperty(name) {\r\n    return unset(this.data, name);\r\n  }\r\n}\r\nwindow.AltrpModel = AltrpModel;\r\nexport default AltrpModel\r\n","import AltrpModel from \"../../classes/AltrpModel\";\n\nclass TemplateLoader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      templateComponent: null,\n    };\n  }\n  /**\n   * Загрузим необходимые модули\n   * @return {Promise<void>}\n   */\n  async componentDidMount() {\n    const templateLoader = (await import(/* webpackChunkName: 'TemplateLoader' */\"../../classes/modules/TemplateLoader\")).default;\n    const frontElementsFabric = (await import( /* webpackChunkName: 'FrontElementsFabric' */\"../../../../../front-app/src/js/classes/FrontElementsFabric\")).default;\n    const ElementWrapper = (await import( /* webpackChunkName: 'ElementWrapper' */\"../../../../../front-app/src/js/components/ElementWrapper\")).default;\n    this.setState(state => ({...state, templateLoader, frontElementsFabric, ElementWrapper}), this.loadTemplate);\n  }\n  /**\n   * Загрузим шаблон\n   * @return {Promise<void>}\n   */\n  async loadTemplate(){\n    let templateComponent = null;\n    const {templateLoader, frontElementsFabric} = this.state;\n    if(this.props.templateId){\n      templateComponent = await templateLoader.loadParsedTemplate(this.props.templateId);\n      templateComponent = frontElementsFabric.cloneElement(templateComponent);\n      if(this.props.cardModel instanceof AltrpModel){\n        templateComponent.setCardModel(this.props.cardModel);\n      }\n\n      templateComponent = React.createElement(templateComponent.componentClass,\n          {...this.props,\n            children: templateComponent.children,\n            element: templateComponent,\n            ElementWrapper: this.state.ElementWrapper\n          });\n    }\n\n\n    this.setState(state => ({...state, templateComponent}), async () => {\n      if(_.isFunction(this.props.onLoad)) {\n        // await delay(50);\n        this.props.onLoad();\n      };\n    });\n  }\n\n  /**\n   * Обновление компонента\n   * @param {{}} prevProps\n   * @param {{}} prevState\n   */\n  componentDidUpdate(prevProps, prevState) {\n\n    /**\n     * Проверим обновилось ли ИД шаблона\n     */\n    if(this.props.templateId !== prevProps.templateId){\n      this.loadTemplate();\n    }\n  }\n  render() {\n    return <div className=\"inner-template\">{this.state.templateComponent}</div>;\n  }\n}\n\nexport default TemplateLoader\n","import TemplateLoader from \"../../../../editor/src/js/components/template-loader/TemplateLoader\";\r\n\r\n(window.altrpHelpers = window.altrpHelpers || {}).TemplateLoader = TemplateLoader;\r\n"],"sourceRoot":""}